(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[0],{121:function(e,t,n){},122:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(3),a=n.n(s),i=n(60),r=n.n(i),o=(n(69),n(24)),l=n(18),u=n(4),d=(n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(8));var j=n(11),b=(n(82),n(6)),p=n.n(b),h=n(12),O=n(26),m=n(27),f=function(){function e(t){Object(O.a)(this,e),this.uid=t}return Object(m.a)(e,[{key:"getPopular",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/home/popular",{mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getTrending",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/home/trending",{mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getRecommend",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||null==t){e.next=8;break}return e.next=3,fetch("/api/home/recomended?uid="+t);case 3:return n=e.sent,e.next=6,n.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserSongs",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/u/musics?uid="+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSongsById",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/listen?uid="+t+"&song="+n);case 2:return c=e.sent,e.next=5,c.json();case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUserData",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/u/data?uid="+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQ",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==t||null==t){e.next=8;break}return e.next=3,fetch("/api/home/result?search="+t,{mode:"cors"});case 3:return n=e.sent,e.next=6,n.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNotifications",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,fetch("/api/u/notification?uid="+t,{mode:"cors"});case 3:return n=e.sent,e.next=6,n.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkName",value:function(e){if(null!=e||""!=e)return this.postData("/api/profile/checkname",{name:e})}},{key:"update_profile",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.url&&(t.data.pfp.url=this.url),console.log(t),"/api/profile/update",e.next=5,this.postData("/api/profile/update",{update:t});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"upload",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,c,s=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t,c=d.a.storage(),"/api/music/upload",c.ref("public/songs/"+t.genre+"/"+t.title).child(t.image.name).put(t.image).then((function(e){return e.ref.getDownloadURL()})).then((function(e){console.log(e),n.imageURL=e})),c.ref("public/songs/"+t.genre+"/"+t.title).child(t.file.name).put(t.file).then((function(e){return e.ref.getDownloadURL()})).then((function(e){return n.audioURL=e})).then((function(){return s.postData("/api/music/upload",n)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserLikes",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/home/liked?uid="+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update_profile_pic",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,c=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.a.storage(),e.next=3,n.ref("/users/profile/pfp").child(t.name).put(t).then((function(e){return e.ref.getDownloadURL()})).then((function(e){return c.url=e})).then((function(){return console.log("completed")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendLike",value:function(e,t,n,c){var s={likedBy:e,likedOf:t,songID:n,song:c};this.postData("/api/music/like/send",s)}},{key:"postData",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,c,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 4:return c=e.sent,e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();var x=function(){var e,t=Object(j.g)();d.a.auth().onAuthStateChanged((function(t){e=t.uid}));var n=new f(e);document.title="Edit Profile";var a=Object(s.useState)(),i=Object(u.a)(a,2),r=i[0],o=i[1],l=Object(s.useState)(50),b=Object(u.a)(l,2),p=b[0],h=b[1],O=Object(s.useState)(50),m=Object(u.a)(O,2),x=m[0],v=m[1],g=Object(s.useState)(0),N=Object(u.a)(g,2),y=N[0],w=N[1],k=Object(s.useState)(null),S=Object(u.a)(k,2),C=S[0],I=S[1],E=Object(s.useState)(null),L=Object(u.a)(E,2),D=L[0],U=L[1],_=Object(s.useState)(null),A=Object(u.a)(_,2),T=A[0],P=A[1],R=Object(s.useState)(null),B=Object(u.a)(R,2),F=B[0],M=B[1],q=Object(s.useState)(null),z=Object(u.a)(q,2),H=z[0],K=z[1];return Object(c.jsx)("div",{id:"edit-profile",className:"main",children:Object(c.jsx)("div",{className:"edit-profile-container",children:Object(c.jsxs)("div",{className:"edit-profile-box",children:[Object(c.jsxs)("div",{className:"edit-head-wrapper",children:[Object(c.jsx)("div",{className:"edit-head",children:Object(c.jsx)("span",{children:"Edit Your Profile"})}),Object(c.jsx)("div",{className:"line",id:"edit-line"})]}),Object(c.jsxs)("div",{className:"profile-form-container",children:[Object(c.jsxs)("div",{className:"pfp-preview",children:[Object(c.jsxs)("div",{className:"pfp-preview-box",children:[Object(c.jsxs)("div",{className:"crop-container",children:[Object(c.jsx)("div",{className:"crop"}),Object(c.jsx)("img",{src:H,alt:"image-preview",id:"preview",style:{transform:"translate(".concat(p-50,"px, ").concat(x-50,"px) scale(").concat(parseInt(y)/100+1,")")}})]}),Object(c.jsxs)("div",{className:"upload-pfp",children:[Object(c.jsx)("input",{type:"file",id:"upload-pfp-btn",hidden:!0,onChange:function(e){return t=e.target.files,o(t[0]),void K(URL.createObjectURL(t[0]));var t}}),Object(c.jsx)("label",{htmlFor:"upload-pfp-btn",children:Object(c.jsx)("span",{children:"Upload file"})})]})]}),Object(c.jsx)("div",{className:"sliders",children:Object(c.jsxs)("div",{className:"slider-box",children:[Object(c.jsx)("div",{className:"slider-x",children:Object(c.jsx)("input",{type:"range",value:p,onChange:function(e){return h(e.target.value)}})}),Object(c.jsx)("div",{className:"slider-y",children:Object(c.jsx)("input",{type:"range",value:x,onChange:function(e){return v(e.target.value)}})}),Object(c.jsx)("div",{className:"slider-zoom",children:Object(c.jsx)("input",{type:"range",value:y,onChange:function(e){return w(e.target.value)}})})]})})]}),Object(c.jsxs)("div",{className:"profile-form",children:[Object(c.jsxs)("div",{className:"display-name",children:[Object(c.jsx)("div",{className:"form-label",children:Object(c.jsx)("span",{children:"Display Name"})}),Object(c.jsx)("div",{className:"display-name-input",children:Object(c.jsx)("input",{className:"-input-form",type:"text",placeholder:"Name...",onKeyUp:function(e){return I(e.target.value)}})})]}),Object(c.jsxs)("div",{className:"first Name",children:[Object(c.jsx)("div",{className:"form-label",children:Object(c.jsx)("span",{children:"First Name"})}),Object(c.jsx)("div",{className:"first-name-input",children:Object(c.jsx)("input",{className:"-input-form",type:"text",placeholder:"First Name...",onKeyUp:function(e){return U(e.target.value)}})})]}),Object(c.jsxs)("div",{className:"last Name",children:[Object(c.jsx)("div",{className:"form-label",children:Object(c.jsx)("span",{children:"Last Name"})}),Object(c.jsx)("div",{className:"last-name-input",children:Object(c.jsx)("input",{className:"-input-form",type:"text",placeholder:"Last Name...",onKeyUp:function(e){return P(e.target.value)}})})]}),Object(c.jsxs)("div",{className:"bio",children:[Object(c.jsx)("div",{className:"form-label",children:Object(c.jsx)("span",{children:"Bio"})}),Object(c.jsx)("div",{className:"bio-input",children:Object(c.jsx)("textarea",{className:"-input-form",type:"text",placeholder:"describe yourself...",onKeyUp:function(e){return M(e.target.value)}})})]})]}),Object(c.jsxs)("div",{className:"save-cancel",children:[Object(c.jsx)("div",{className:"cancel",children:Object(c.jsx)("button",{onClick:function(){t.push("/")},children:"Cancel"})}),Object(c.jsx)("div",{className:"save",children:Object(c.jsx)("button",{onClick:function(){var c={data:{info:{name:C,firstName:D,lastName:T,bio:F},pfp:{url:"",x:p,y:x,zoom:y}},temp:{userId:e}};r?n.update_profile_pic(r).then((function(){n.update_profile(c).then((function(){return t.push("/")}))})):n.update_profile(c).then((function(){return console.log("completed")}))},children:"Save"})})]})]})]})})})},v=n(7);n(91);var g=function(e){var t=Object(s.useState)(),n=Object(u.a)(t,2),a=(n[0],n[1]);return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"dropdown-wrapper",children:Object(c.jsx)("div",{className:"dropdown",children:Object(c.jsx)("div",{className:"dropdown-box",children:Object(c.jsx)("div",{className:"dropdown-lists",children:Object(c.jsxs)("ul",{children:[Object(c.jsx)(v.b,{to:"/u/"+e.uid+"/music",children:Object(c.jsx)("li",{children:"Profile"})}),Object(c.jsx)("li",{children:"#"}),Object(c.jsx)("li",{children:"#"}),Object(c.jsx)("li",{children:"#"}),Object(c.jsx)("li",{onClick:function(){return a("dark")},children:"Dark Mode"}),Object(c.jsx)("li",{children:"Sign Out"})]})})})})})})},N=n(62),y=n.n(N);var w=function(e){var t=Object(s.useState)(),n=Object(u.a)(t,2),c=n[0],a=n[1];return Object(s.useEffect)((function(){if(e){var t=y()("http://localhost:3000/",{transport:["websocket"],query:{id:e}});return a(t),function(){return t.close()}}}),[e]),c},k=Object(s.createContext)(null),S=Object(s.createContext)(null);new f;var C=function(e){var t=e.notification,n=Object(s.useState)(),a=Object(u.a)(n,2),i=a[0],r=a[1],o=Object(s.useState)(),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(s.useState)(),p=Object(u.a)(b,2),h=p[0],O=p[1],m=Object(s.useState)(),f=Object(u.a)(m,2),x=f[0],v=f[1],g=Object(s.useState)(),N=Object(u.a)(g,2),y=N[0],w=N[1],k=Object(s.useState)(),S=Object(u.a)(k,2),C=S[0],I=S[1],E=Object(s.useState)(),L=Object(u.a)(E,2),D=L[0],U=L[1],_=Object(s.useState)(null),A=Object(u.a)(_,2),T=A[0],P=A[1];return Object(s.useEffect)((function(){t&&(w(t.user),"like"==t.type?(r("liked your"),U("song "+t.title)):"comment"==t.type?r("commented"):"followed"==t.type&&r("followed you"))}),[t]),Object(s.useEffect)((function(){y&&(I(y.info.name),P(y.pfp.url),j(y.pfp.x),O(y.pfp.y),v(y.pfp.zoom))}),[y]),Object(c.jsxs)("div",{className:"notification-items",children:[Object(c.jsx)("div",{className:"notification-profile",children:Object(c.jsx)("div",{className:"pfp",id:"notfication-pfp",children:Object(c.jsx)("div",{className:"pfp-container",id:"notfication-pfp-container",children:Object(c.jsx)("pfp",{className:"pfp-box",id:"notfication-pfp-box",children:Object(c.jsx)("img",{id:"notfication-pfp-img",src:T,style:{transform:"translate(".concat(d-50,"px, ").concat(h-50,"px) scale(").concat(parseInt(x)/100+1,")")}})})})})}),Object(c.jsxs)("div",{className:"notification-info",children:[Object(c.jsx)("div",{className:"notification-userName",children:C}),Object(c.jsx)("div",{className:"notfication-type",children:Object(c.jsx)("span",{children:i})}),Object(c.jsx)("div",{className:"notification-activity",children:Object(c.jsx)("span",{children:D})})]})]})},I=(n(121),new f);var E=function(e){var t=Object(s.useContext)(k),n=Object(s.useState)(null),a=Object(u.a)(n,2),i=a[0],r=a[1];return Object(s.useEffect)((function(){I.getNotifications(t).then((function(e){return r(e)}))}),[t]),Object(c.jsx)("div",{id:"notification",children:Object(c.jsx)("div",{className:"notification-container",children:Object(c.jsxs)("div",{className:"notification-box",children:[Object(c.jsx)("div",{className:"notfication-header",children:Object(c.jsx)("span",{children:"Notifications"})}),Object(c.jsx)("div",{className:"notification-contents",children:i&&i.slice(0).reverse().map((function(e,t){return Object(c.jsx)(C,{notification:e},t)}))})]})})})},L=new f;var D=function(e){var t=Object(s.useState)(!0),n=Object(u.a)(t,2),a=n[0],i=n[1],r=Object(s.useState)(!0),o=Object(u.a)(r,2),l=o[0],b=o[1],p=Object(s.useState)(null),h=Object(u.a)(p,2),O=h[0],m=h[1],f=Object(s.useState)(null),x=Object(u.a)(f,2),N=x[0],y=(x[1],Object(s.useState)(null)),C=Object(u.a)(y,2),I=C[0],D=C[1],U=Object(j.g)(),_=Object(s.useState)(!1),A=Object(u.a)(_,2),T=A[0],P=A[1],R=Object(s.useState)(!0),B=Object(u.a)(R,2),F=B[0],M=B[1],q=Object(s.useState)(),z=Object(u.a)(q,2),H=z[0],K=z[1],G=Object(s.useContext)(k),J=(Object(s.useContext)(S),w(G));function W(e){Q(e.target.getAttribute("data-name"))}function Q(e){M(!0),""!=e&&U.push("/results?search="+e)}return Object(s.useEffect)((function(){J&&J.on("notification",(function(e){e&&P(e.newNotification)}))}),[G,J]),d.a.auth().onAuthStateChanged((function(e){e?D(e.uid):U.push("/login")})),window.onclick=function(e){"searchBar"!==e.target.id&&M(!0),"profile-drop"==e.target.id&&l?b(!1):("profile-drop"!==e.target.id||"profile-drop"==e.target.id&&0==l)&&b(!0),"notification-button"==e.target.id&&a?(P(!1),i(!1)):"notification-button"==e.target.id&&0==a?i(!0):"notification-box"==e.target.className?M(!1):i(!0)},Object(s.useEffect)((function(){""!=O?(M(!1),L.searchQ(O).then((function(e){return K(e)}))):M(!0)}),[O]),Object(c.jsx)("header",{children:Object(c.jsxs)("div",{id:"hd-container",children:[Object(c.jsx)("div",{id:"logo-contain",children:Object(c.jsx)(v.b,{to:"/",children:Object(c.jsx)("h1",{})})}),Object(c.jsxs)("div",{id:"search",children:[Object(c.jsx)("div",{className:"bar",children:Object(c.jsx)("input",{id:"searchBar",placeholder:"search",autoComplete:"off",onKeyUp:function(e){return"Enter"==e.key?Q(O):null},onChange:function(e){m(e.target.value.toLocaleLowerCase())}})}),Object(c.jsx)("div",{className:"searchBtn",children:Object(c.jsx)("span",{id:"srhBtn",className:"material-icons",onClick:function(){return Q(O)},children:"search"})}),F?null:Object(c.jsx)("div",{className:"searchList-wrapper",children:Object(c.jsx)("div",{className:"searchList-holder",children:Object(c.jsx)("ul",{children:H&&H.map((function(e,t){return Object(c.jsx)("li",{className:"lists",children:Object(c.jsx)("div",{className:"search-list",children:Object(c.jsxs)("span",{onClick:W,"data-name":e.info.title,id:"autolist",children:[" ",e.info.title]})})},t)}))})})})]}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{id:"buttons",children:[Object(c.jsx)("div",{className:"profile",children:Object(c.jsx)("img",{src:N,height:"25",width:"25",alt:"",id:"profile-drop"})}),Object(c.jsx)("div",{className:"notification-button",children:T?Object(c.jsx)("span",{id:"notification-button",className:"material-icons",children:"notifications_active"}):Object(c.jsx)("span",{id:"notification-button",className:"material-icons",children:"notifications"})})]}),a?null:Object(c.jsx)(E,{}),l?null:Object(c.jsx)(g,{uid:I})]})]})})};var U=function(){var e=Object(s.useContext)(S),t=Object(s.useState)(),n=Object(u.a)(t,2),a=n[0],i=n[1];return Object(s.useEffect)((function(){i(e.getCurrentSong())}),[e.getCurrentSong()]),Object(c.jsx)("div",{id:"audio-preview",children:Object(c.jsx)("div",{className:"audio-preview-container",children:Object(c.jsx)("div",{className:"audio-preview-box",children:Object(c.jsxs)("div",{className:"audio-preview-contents",children:[Object(c.jsx)("div",{className:"audio-preview-image",children:Object(c.jsx)("div",{className:"image",style:{backgroundImage:'url("'.concat(a?a.src.imageURL:null,'")')}})}),Object(c.jsxs)("div",{className:"audio-preview-context",children:[Object(c.jsx)("div",{className:"audio-preview-title",children:Object(c.jsx)("span",{children:a?a.info.title:"unknown"})}),Object(c.jsx)("div",{className:"audio-preview-artist",children:Object(c.jsx)("span",{children:a?a.info.artist:"unknown"})})]})]})})})})};var _=function(e){var t=Object(s.useContext)(S),n=Object(s.useState)(0),a=Object(u.a)(n,2),i=a[0],r=a[1],o=Object(s.useState)(1),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(s.useState)(t.getCurrentTime()),p=Object(u.a)(b,2),h=p[0],O=p[1];return Object(s.useEffect)((function(){t.audio.addEventListener("timeupdate",(function(e){var n=t.audio.currentTime/t.audio.duration*100;O(t.getCurrentTime()),r(n)}))}),[e.AudioInfo]),Object(s.useEffect)((function(){t.volumeHandler(d)}),[d]),Object(c.jsx)("div",{className:"audio-wrapper",children:Object(c.jsx)("div",{className:"audio-container",children:Object(c.jsxs)("div",{className:"audio-box",children:[Object(c.jsx)(U,{audio:e.AudioInfo}),Object(c.jsxs)("div",{className:"audio_elements-container",children:[Object(c.jsxs)("div",{className:"play_btn-container",children:[Object(c.jsx)("div",{className:"play-container",children:t.audio.paused?Object(c.jsx)("span",{onClick:function(){e.playAudio()},id:"play_btn",className:"material-icons",children:"play_arrow"}):Object(c.jsx)("span",{onClick:function(t){e.stop()},id:"play_btn",className:"material-icons",children:"pause"})}),Object(c.jsx)("span",{className:"material-icons",id:"fast_rewind",onClick:function(){return e.previous()},children:"skip_previous"}),Object(c.jsx)("span",{className:"material-icons",id:"fast_forward",onClick:function(){return e.next()},children:"skip_next"})]}),Object(c.jsx)("div",{className:"progress_div",children:Object(c.jsx)("div",{class:"progress_holder",id:"prog_holder",onMouseDown:function(e){e.preventDefault();var n=(e.target||e.srcElement).getBoundingClientRect(),c=(e.clientX-n.left)/document.documentElement.offsetWidth;console.log(c),t.audio.currentTime=c*t.audio.duration*1.9},onMouseUp:function(e){e.preventDefault();var n=(e.target||e.srcElement).getBoundingClientRect(),c=(e.clientX-n.left)/document.documentElement.offsetWidth;console.log(c),t.audio.currentTime=c*t.audio.duration*1.9},children:Object(c.jsx)("div",{id:"progress_meter",style:{width:i+"%"}})})}),Object(c.jsx)("div",{className:"current",children:Object(c.jsx)("span",{children:h})}),Object(c.jsx)("div",{className:"duration",children:Object(c.jsx)("span",{children:t.getDuration()})}),Object(c.jsxs)("div",{className:"volume",children:[Object(c.jsx)("div",{className:"volume-i",children:Object(c.jsx)("span",{class:"material-icons",children:"volume_up"})}),Object(c.jsx)("div",{className:"volume_slider",children:Object(c.jsx)("input",{type:"range",onChange:function(e){return j(e.target.value/100)},value:100*d})})]})]})]})})})};var A=function(){return Object(c.jsxs)("div",{className:"nav-div1",children:[Object(c.jsx)("span",{className:"nav-heading",children:"Navigation"}),Object(c.jsxs)("ul",{children:[Object(c.jsx)(v.b,{to:"/",exact:!0,activeClassName:"btn-active",children:Object(c.jsxs)("li",{className:"btn",children:[Object(c.jsx)("span",{class:"material-icons",children:"home"}),Object(c.jsx)("p",{children:"Home"})]})}),Object(c.jsx)(v.b,{to:"/explore",children:Object(c.jsxs)("li",{className:"btn",children:[Object(c.jsx)("span",{class:"material-icons",children:"explore"}),Object(c.jsx)("p",{children:"explore"})]})}),Object(c.jsx)(v.b,{to:"/upload",exact:!0,activeClassName:"btn-active",children:Object(c.jsxs)("li",{className:"btn",children:[Object(c.jsx)("span",{class:"material-icons md-dark md-inactive",children:"upload"}),Object(c.jsx)("p",{children:"upload"})]})}),Object(c.jsx)(v.b,{to:"/account/edit",exact:!0,activeClassName:"btn-active",children:Object(c.jsxs)("li",{className:"btn",id:"ab",children:[Object(c.jsx)("span",{class:"material-icons",children:"perm_identity"}),Object(c.jsx)("p",{children:"edit"})]})})]})]})};var T=function(){var e=Object(s.useContext)(k);return Object(c.jsxs)("div",{className:"nav-div2",children:[Object(c.jsx)("span",{className:"nav-heading",children:"Library"}),Object(c.jsxs)("ul",{children:[Object(c.jsx)(v.b,{to:"/history",exact:!0,activeClassName:"btn-active",children:Object(c.jsxs)("li",{className:"btn",children:[Object(c.jsx)("span",{class:"material-icons",children:"history"}),Object(c.jsx)("p",{children:"history"})]})}),Object(c.jsx)(v.b,{to:"/liked",exact:!0,activeClassName:"btn-active",children:Object(c.jsxs)("li",{className:"btn",children:[Object(c.jsx)("span",{class:"material-icons",children:"favorite"}),Object(c.jsx)("p",{children:"Liked"})]})}),Object(c.jsx)(v.b,{to:"/u/"+e+"/music",exact:!0,activeClassName:"btn-active",children:Object(c.jsxs)("li",{className:"btn",children:[Object(c.jsx)("span",{class:"material-icons md-dark md-inactive",children:"album"}),Object(c.jsx)("p",{children:"Your Music"})]})})]})]})};var P=function(){return d.a.auth().onAuthStateChanged((function(e){e})),Object(c.jsx)("div",{id:"nav",children:Object(c.jsxs)("nav",{children:[Object(c.jsx)("div",{className:"nav-heading",children:Object(c.jsx)("h2",{children:"Moosax"})}),Object(c.jsxs)("div",{className:"main-nav",children:[Object(c.jsx)(A,{}),Object(c.jsx)(T,{}),Object(c.jsx)("div",{className:"line",id:"nav-line"})]}),Object(c.jsxs)("div",{className:"signout",onClick:function(){return d.a.auth().signOut()},children:[Object(c.jsx)("span",{className:"material-icons",children:"login"}),Object(c.jsx)("p",{children:"signout"})]})]})})};var R=function(e){return console.log(e),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{id:"about",className:"main",children:Object(c.jsx)("div",{className:"headingCont",children:Object(c.jsx)("h1",{children:"This is About"})})})})},B=new f;var F=function(e){var t,n=e.uID,a=e.music;d.a.auth().currentUser&&(t=d.a.auth().currentUser.uid),e.name;var i=e.userName,r=Object(s.useState)(a.stats.likes),o=Object(u.a)(r,2),l=o[0],j=o[1],b=Object(s.useState)(),p=Object(u.a)(b,2),h=p[0],O=p[1],m=a.widgetInfo&&void 0!=a.widgetInfo.likes[t];return Object(s.useEffect)((function(){O(!!m)}),[i]),Object(c.jsxs)("div",{class:"like",children:[Object(c.jsx)("i",{class:"material-icons",onClick:function(){B.sendLike(t,n,a.info.songID,a),h?(j(l-1),O(!1)):(O(!0),j(l+1))},children:h?Object(c.jsx)("p",{children:"favorite"}):Object(c.jsx)("p",{children:"favorite_border"})}),Object(c.jsx)("span",{children:l})]})};n.p,n(122);function M(e){return Object(c.jsx)("div",{id:"dot-option",children:Object(c.jsx)("div",{className:"dot-option-container",children:Object(c.jsx)("div",{className:"dot-option-box",children:Object(c.jsxs)("div",{className:"dot-option-content",children:[e.qued?Object(c.jsxs)("div",{className:"add-que",onClick:function(){e.remove()},children:[Object(c.jsx)("i",{class:"material-icons",children:"queue_music"}),Object(c.jsx)("span",{children:"remove que"})]}):Object(c.jsxs)("div",{className:"add-que",onClick:function(){e.que()},children:[Object(c.jsx)("i",{class:"material-icons",children:"queue_music"}),Object(c.jsx)("span",{children:"que"})]}),Object(c.jsxs)("div",{className:"share",children:[Object(c.jsx)("i",{class:"material-icons",children:"reply"}),Object(c.jsx)("span",{children:"share"})]}),Object(c.jsxs)("div",{className:"report",children:[Object(c.jsx)("i",{class:"material-icons",children:"flag"}),Object(c.jsx)("span",{children:"report"})]}),Object(c.jsxs)("div",{className:"cancel",children:[Object(c.jsx)("i",{class:"material-icons",children:"close"}),Object(c.jsx)("span",{onClick:function(){return e.close()},children:"cancel"})]})]})})})})}var q=function(e){var t=Object(s.useContext)(S),n=Object(s.useState)(!1),a=Object(u.a)(n,2),i=a[0],r=a[1],o=Object(s.useState)(!1),l=Object(u.a)(o,2),d=l[0],j=l[1];return Object(s.useEffect)((function(){console.log(e.show),0==e.show&&r(!1)}),[e.show]),Object(c.jsx)("div",{id:"three-dot",children:Object(c.jsxs)("div",{className:"three-dot-container",onClick:function(){return r(!i)},children:[Object(c.jsx)("div",{className:"dot-icon",children:Object(c.jsx)("span",{class:"material-icons",children:"more_horiz"})}),i?Object(c.jsx)(M,{song:e.song,que:function(){t.loadSongs(e.song),j(!0)},remove:function(){t.removeSongs(e.song),j(!1)},qued:d,close:function(){r(!1)}}):null]})})};var z=function(e){Object(s.useRef)();var t=Object(s.useState)(!0),n=Object(u.a)(t,2),a=n[0],i=n[1],r=Object(s.useState)(!0),o=Object(u.a)(r,2),l=o[0],d=o[1],j=Object(s.useContext)(S),b=e.name,p=e.userName;return Object(s.useEffect)((function(){(j.audio.src!=b.src.aduioURL||j.audio.paused)&&i(!0),j.audio.src!=b.src.aduioURL||j.audio.paused||i(!1)}),[j.audio.src,b.src.aduioURL,j.audio.paused]),Object(c.jsxs)("div",{className:"music-preview-box",onMouseOut:function(){return d(!1)},children:[Object(c.jsx)(v.b,{to:"/listen?m=".concat(b.info.songID||b.info.title,"&uid=").concat(b.info.userID),children:Object(c.jsx)("div",{className:"user-musics-content",style:{backgroundImage:'url("'.concat(b.src.imageURL,'")')}})}),Object(c.jsx)("div",{className:"-button",children:a?Object(c.jsx)("i",{className:"material-icons",onClick:function(t){i(!1),e.play(b)},value:b.info.title,id:"play_hover",children:"play_arrow"}):Object(c.jsx)("i",{onClick:function(t){i(!0),e.stop(t)},className:"material-icons",children:"pause"})}),Object(c.jsx)(q,{song:b,show:l}),Object(c.jsxs)("div",{id:"user-song-info",children:[Object(c.jsx)("div",{class:"user-song-title",children:Object(c.jsxs)("span",{children:[b.info.artist," - ",b.info.title]})}),Object(c.jsxs)("div",{class:"user-song-user",children:[Object(c.jsx)("div",{class:"mini-pfp",children:Object(c.jsx)("img",{src:e.pfp,width:"30",height:"30"})}),Object(c.jsx)(v.b,{to:"/u/"+b.info.userID+"/music",children:Object(c.jsx)("span",{children:b.uploader.info.name})})]}),Object(c.jsxs)("div",{className:"stats",children:[Object(c.jsxs)("div",{class:"views",children:[Object(c.jsx)("i",{class:"material-icons",children:"play_arrow"}),Object(c.jsx)("span",{children:b.stats.views})]}),Object(c.jsx)(F,{name:b.info.title,uID:b.info.userID,userName:p,music:b})]})]})]})},H=0;var K=function(e){var t=new f,n=Object(s.useState)([]),a=Object(u.a)(n,2),i=a[0],r=a[1],o=Object(s.useState)(H),l=Object(u.a)(o,2),d=l[0],j=l[1];function b(t){e.play(t)}function p(){e.stop()}return Object(s.useEffect)((function(){t.getPopular().then((function(e){return r(e)}))}),[]),Object(c.jsxs)("div",{id:"popular-container",className:"home-music-container ",children:[Object(c.jsxs)("div",{className:"musics-texts",children:[Object(c.jsx)("div",{className:"musics-title",children:Object(c.jsx)("h4",{children:"Popular musics"})}),Object(c.jsx)("div",{className:"musics-subtext",children:Object(c.jsx)("span",{children:"Most popular musics for you"})})]}),Object(c.jsx)("div",{className:"line"}),Object(c.jsx)("div",{className:"preview-box-container",style:{transform:"translate(".concat(d,"px, ",85,"px)")},children:i&&i.map((function(t,n){return Object(c.jsx)(s.Fragment,{children:Object(c.jsx)(z,{name:t,play:b,userName:e.userName,stop:p,audio:e.audio})},n)}))}),Object(c.jsxs)("div",{className:"content-slider",children:[Object(c.jsx)("div",{id:"next",className:"slider",onClick:function(){j(H-=225)},children:Object(c.jsx)("span",{className:"material-icons",children:"keyboard_arrow_right"})}),Object(c.jsx)("div",{id:"previous",className:"slider",onClick:function(){j(H+=225)},children:Object(c.jsx)("span",{className:"material-icons",children:"keyboard_arrow_left"})})]})]})},G=0;var J=function(e){var t=Object(s.useContext)(k),n=new f,a=Object(s.useState)(),i=Object(u.a)(a,2),r=i[0],o=i[1],l=Object(s.useState)(G),d=Object(u.a)(l,2),j=d[0],b=d[1];function p(t){e.play(t)}function h(){e.stop()}return Object(s.useEffect)((function(){n.getRecommend(t).then((function(e){return o(e)}))}),[t]),document.onscroll=function(){document.documentElement.scrollTop+window.innerHeight==document.documentElement.scrollHeight&&console.log("scrolled")},Object(c.jsxs)("div",{id:"recomend-container",className:"home-music-container ",children:[Object(c.jsxs)("div",{className:"musics-texts",children:[Object(c.jsx)("div",{className:"musics-title",children:Object(c.jsx)("h4",{children:"Recommended musics"})}),Object(c.jsx)("div",{className:"musics-subtext",children:Object(c.jsx)("span",{children:"Most recomended musics for you"})})]}),Object(c.jsx)("div",{className:"line"}),Object(c.jsx)("div",{className:"preview-box-container",id:"recomend-box-container",style:{transform:"translate(".concat(j,"px, ",85,"px)")},children:r&&r.map((function(t,n){return Object(c.jsx)(s.Fragment,{children:Object(c.jsx)(z,{name:t,play:p,userName:e.userName,stop:h,audio:e.audio})},n)}))}),Object(c.jsxs)("div",{className:"content-slider",children:[Object(c.jsx)("div",{id:"next",className:"slider",onClick:function(){b(G-=225)},children:Object(c.jsx)("span",{class:"material-icons",children:"keyboard_arrow_right"})}),Object(c.jsx)("div",{id:"previous",className:"slider",onClick:function(){G+=225,console.log(G),b(G)},children:Object(c.jsx)("span",{class:"material-icons",children:"keyboard_arrow_left"})})]})]})},W=0;var Q=function(e){var t=Object(s.useState)(),n=Object(u.a)(t,2),a=n[0],i=n[1],r=Object(s.useState)(W),o=Object(u.a)(r,2),l=o[0],d=o[1],j=new f;function b(t){e.play(t)}function p(){e.stop()}return Object(s.useEffect)((function(){j.getTrending().then((function(e){return i(e)}))}),[]),Object(c.jsxs)("div",{id:"trending-container",className:"home-music-container ",children:[Object(c.jsxs)("div",{className:"musics-texts",children:[Object(c.jsx)("div",{className:"musics-title",children:Object(c.jsx)("h4",{children:"Trending musics"})}),Object(c.jsx)("div",{className:"musics-subtext",children:Object(c.jsx)("span",{children:"Most trending musics for you"})})]}),Object(c.jsx)("div",{className:"line"}),Object(c.jsx)("div",{className:"preview-box-container",id:"trending-box-container",style:{transform:"translate(".concat(l,"px, ",85,"px)")},children:a&&a.map((function(t,n){return Object(c.jsx)(s.Fragment,{children:Object(c.jsx)(z,{name:t,play:b,userName:e.userName,stop:p,audio:e.audio})},n)}))}),Object(c.jsxs)("div",{className:"content-slider",children:[Object(c.jsx)("div",{id:"next",className:"slider",onClick:function(){d(W-=225)},children:Object(c.jsx)("span",{className:"material-icons",children:"keyboard_arrow_right"})}),Object(c.jsx)("div",{id:"previous",className:"slider",onClick:function(){W+=225,console.log(W),d(W)},children:Object(c.jsx)("span",{class:"material-icons",children:"keyboard_arrow_left"})})]})]})};var V=function(e){document.title="Moosix";var t=Object(s.useContext)(k),n=(d.a.database(),Object(s.useState)()),a=Object(u.a)(n,2),i=a[0],r=a[1],o=Object(s.useState)("0%"),l=Object(u.a)(o,2);function j(t){e.play(t)}function b(t){e.stop()}return l[0],l[1],d.a.auth(),Object(s.useEffect)((function(){t&&d.a.database().ref("users/"+t+"/private/login credentials").on("value",(function(e){console.log(e),r(e.val().userName)}))}),[t]),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{id:"home",className:"main",children:Object(c.jsx)("div",{className:"music-content-container",id:"home-musics",children:Object(c.jsxs)("div",{className:"music-box",id:"home-box",children:[Object(c.jsx)(K,{play:j,stop:b,userName:i,audio:e.audio}),Object(c.jsx)(Q,{play:j,stop:b,userName:i,audio:e.audio}),Object(c.jsx)(J,{play:j,stop:b,userName:i,audio:e.audio})]})})})})},X=n(31),Y=(n(123),d.a.initializeApp({apiKey:"AIzaSyBHl1g2tLiLoDJIoKaWCsrdJG_T5xaoj_E",authDomain:"music-app-2a7e7.firebaseapp.com",databaseURL:"https://music-app-2a7e7.firebaseio.com",projectId:"music-app-2a7e7",storageBucket:"music-app-2a7e7.appspot.com",messagingSenderId:"4335188008",appId:"1:4335188008:web:b38bfddbe8feae83dfdd1d"}),n(63)),Z=n.n(Y),$=function(){function e(){Object(O.a)(this,e)}return Object(m.a)(e,[{key:"login",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var c=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.auth().signInWithEmailAndPassword(t,n).then((function(e){return e.user.getIdToken().then((function(e){c.postData("/api/login",{idToken:e})}))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"postData",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,c,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","CSRF-Token":Z.a.get("XSRF-TOKEN")},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 4:return c=e.sent,e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();var ee=function(e){var t,n,a=new $,i=Object(j.g)(),r=Object(s.useState)(),o=Object(u.a)(r,2),l=o[0];return o[1],Object(c.jsx)("div",{id:"login",className:"main-login",children:Object(c.jsx)("div",{className:"form-box",children:Object(c.jsxs)("div",{className:"form-container",children:[Object(c.jsxs)("div",{className:"inputHolder",children:[Object(c.jsx)("div",{className:"logo-form",children:Object(c.jsx)("h1",{children:"Logo"})}),Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("div",{className:"email-holder",children:Object(c.jsx)("input",{placeholder:"email adress",id:"email",className:"-input"})}),Object(c.jsx)("div",{className:"password-holder",children:Object(c.jsx)("input",{placeholder:"password",id:"password",type:"password",className:"-input"})}),Object(c.jsx)("div",{className:"btn-holder",children:Object(c.jsx)("button",{onClick:function(e){t=document.getElementById("email").value,n=document.getElementById("password").value,a.login(t,n).then((function(){i.push("/")}))},children:Object(c.jsx)("span",{children:Object(c.jsx)("b",{children:"Login"})})})})]})]}),Object(c.jsxs)("div",{class:"link-signup",children:[Object(c.jsx)("p",{children:l}),Object(c.jsxs)("p",{children:["Havent created account? plz ",Object(c.jsx)(v.b,{to:"./signup",children:" click here"})]})]})]})})})};var te,ne,ce,se=function(){var e=Object(j.g)();return Object(c.jsx)("div",{id:"signUp",className:"main-login",children:Object(c.jsx)("div",{className:"form-box",children:Object(c.jsxs)("div",{className:"form-container",children:[Object(c.jsx)("div",{class:"logo-form",children:Object(c.jsx)("h1",{children:"Logo"})}),Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("div",{className:"email-holder",children:Object(c.jsx)("input",{id:"email",placeholder:"email",className:"-input"})}),Object(c.jsx)("div",{className:"password-holder",children:Object(c.jsx)("input",{id:"password",placeholder:"password",className:"-input",type:"password"})}),Object(c.jsx)("div",{className:"username-holder",children:Object(c.jsx)("input",{id:"userName",placeholder:"username",className:"-input"})}),Object(c.jsx)("div",{class:"btn-holder",children:Object(c.jsx)("button",{onClick:function(){var t=document.getElementById("email").value,n=document.getElementById("password").value,c=document.getElementById("userName").value;function s(){return(s=Object(h.a)(p.a.mark((function t(n,s){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.a.auth().createUserWithEmailAndPassword(n,s).then((function(){console.log("successfull");var e=X.a.auth().currentUser.uid;console.log(e),X.a.database().ref("users/"+e+"/private/login credentials").set({userName:c,userId:e,userLog:!0}).then(X.a.database().ref("users/"+e+"/public/profile").set({info:{bio:"",firstName:c,lastName:c,name:c},pfp:{url:"",x:50,y:50,zoom:1}}))}));case 2:e.push("./login");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(e,t){s.apply(this,arguments)}(t,n)},children:"Next"})})]}),Object(c.jsx)("div",{class:"link-signup",children:Object(c.jsxs)("p",{children:["Already have an account? plz ",Object(c.jsx)(v.b,{to:"./login",children:" click here"})]})})]})})})},ae=(new Date,new f);function ie(){var e=Object(s.useState)(),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(c.jsx)("div",{className:"edit-upload",children:Object(c.jsx)("div",{className:"edit-upload-box",children:Object(c.jsxs)("div",{className:"edit-upload-main",children:[Object(c.jsxs)("div",{className:"pic-wrapper",children:[Object(c.jsx)("div",{className:"pic-holder",children:Object(c.jsx)("img",{src:n,width:"260",height:"260",alt:"aimge-preview",id:"prev"})}),Object(c.jsxs)("div",{className:"album-cover",children:[Object(c.jsx)("input",{type:"file",id:"album-btn",hidden:!0,onChange:function(e){console.log(e.target),te=document.getElementById("album-btn").files[0],a(URL.createObjectURL(e.target.files[0]))},accept:"image/jpeg, image/png"}),Object(c.jsx)("label",{for:"album-btn",children:Object(c.jsx)("span",{children:"Upload image"})})]})]}),Object(c.jsxs)("div",{className:"song-form",children:[Object(c.jsxs)("div",{className:"song-title",children:[Object(c.jsx)("span",{children:"Title"}),Object(c.jsx)("div",{className:"input-title",children:Object(c.jsx)("input",{id:"title",placeholder:"Name of your song...",className:"-input-form",defaultValue:ne.name,autoComplete:"off"})})]}),Object(c.jsxs)("div",{className:"artist",children:[Object(c.jsx)("span",{children:"Artist"}),Object(c.jsx)("div",{className:"input-artist",children:Object(c.jsx)("input",{id:"artist",placeholder:"Name of the artist...",className:"-input-form",autoComplete:"off"})})]}),Object(c.jsxs)("div",{className:"Genre",children:[Object(c.jsx)("span",{children:"Genre"}),Object(c.jsx)("div",{className:"input-gerne",children:Object(c.jsx)("input",{id:"genre",placeholder:"Name of your genre...",className:"-input-form",autoComplete:"off"})})]}),Object(c.jsxs)("div",{className:"Description",children:[Object(c.jsx)("span",{children:"Description"}),Object(c.jsx)("div",{className:"input-gerne",children:Object(c.jsx)("input",{id:"description",placeholder:"Describe your track..",className:"-input-form",autoComplete:"off"})})]}),Object(c.jsxs)("div",{className:"Tags",children:[Object(c.jsx)("span",{children:"Tags"}),Object(c.jsx)("div",{className:"input-tags",children:Object(c.jsx)("input",{id:"tags",placeholder:"add tags",className:"-input-form",autoComplete:"off"})})]}),Object(c.jsxs)("div",{className:"privateOpt",children:[Object(c.jsx)("span",{children:"Privacy?:"}),Object(c.jsxs)("div",{className:"input-privacy",children:[Object(c.jsxs)("div",{className:"public",children:[Object(c.jsx)("input",{type:"radio",id:"publicRad",name:"radio1",value:"public"}),Object(c.jsx)("label",{for:"publicRad",children:"Public"})]}),Object(c.jsxs)("div",{className:"private",children:[Object(c.jsx)("input",{type:"radio",id:"privateRad",name:"radio1",value:"private"}),Object(c.jsx)("label",{for:"privateRad",children:"Private"})]})]})]}),Object(c.jsxs)("div",{className:"save-cancel",children:[Object(c.jsx)("div",{className:"cancel",children:Object(c.jsx)("button",{onClick:function(){ce.push("/")},children:"Cancel"})}),Object(c.jsx)("div",{className:"save",children:Object(c.jsx)("button",{onClick:function(e){console.log(e),e.target.disabled=!0;var t=d.a.auth().currentUser.uid,n=document.getElementById("title").value,c=document.getElementById("artist").value,s=document.getElementById("genre").value,a=document.getElementById("description").value,i=document.getElementById("tags").value,r=document.getElementById("publicRad").checked;if(n.indexOf(".")>-1||n.indexOf("#")>-1||n.indexOf("/")>-1||n.indexOf("[")>-1||n.indexOf("]")>-1)console.log("cannot use special charecter");else if(!0===r){var o={userID:t,title:n,artist:c,genre:s,description:a,tags:i,image:te,file:ne};ae.upload(o).then((function(){return ce.push("/")}))}},children:"Save"})})]})]})]})})})}var re=function(){var e,t;function n(){return ne=document.getElementById("actual-btn").files[0],ce.push("/upload/info"),Object(c.jsx)(j.a,{to:"/upload/info"})}return ce=Object(j.g)(),console.log(d.a.auth().currentUser),d.a.auth().onAuthStateChanged((function(e){e?(t=e.uid,d.a.database().ref("users/"+t+"/private/login credentials").on("value",(function(e){e.val().userName}))):ce.push("/login")})),Object(s.useEffect)((function(){}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(P,{}),Object(c.jsxs)(j.d,{children:[Object(c.jsx)(j.b,{exact:!0,path:"/upload",children:Object(c.jsx)("div",{className:"main",id:"upload-main",children:Object(c.jsx)("div",{className:"upload-container",id:"uc",children:Object(c.jsx)("div",{className:"upload-box",onDrop:n,children:Object(c.jsxs)("div",{className:"upload-main",children:[Object(c.jsx)("h2",{children:"Choose a song you want to upload"}),Object(c.jsxs)("div",{className:"upload-button",children:[Object(c.jsx)("input",{type:"file",id:"actual-btn",hidden:!0,onChange:n,accept:"audio/wav, audio/mp3"}),Object(c.jsx)("label",{for:"actual-btn",children:Object(c.jsx)("span",{children:"Upload file"})})]})]})})})})}),Object(c.jsx)(j.b,(e={exact:!0,path:"/upload/info"},Object(o.a)(e,"exact",!0),Object(o.a)(e,"component",ie),e))]})]})};var oe=function(e){var t=e.musics,n=e.uID,a=e.userName,i=e.pfp,r=e.user;function o(t){e.play(t)}function l(){console.log("yes stop"),e.stop()}return Object(c.jsx)("div",{class:"music-content-container",children:Object(c.jsx)("div",{class:"music-box",children:Object(c.jsx)("div",{class:"user-musics",children:t&&t.map((function(t,u){return Object(c.jsx)(s.Fragment,{children:Object(c.jsx)(z,{name:t,play:o,uID:n,userName:a,pfp:i,user:r,stop:l,audio:e.audio})},u)}))})})})},le=new f,ue=function(e){var t=Object(s.useState)(),n=Object(u.a)(t,2),a=n[0],i=n[1],r=Object(s.useState)(),o=Object(u.a)(r,2),l=o[0],b=o[1],p=Object(s.useState)(),h=Object(u.a)(p,2),O=h[0],m=h[1],f=Object(s.useState)(),x=Object(u.a)(f,2),g=x[0],N=x[1],y=Object(s.useState)([]),w=Object(u.a)(y,2),k=w[0],S=w[1],C=Object(s.useState)(null),I=Object(u.a)(C,2),E=I[0],L=I[1],D=Object(s.useState)(null),U=Object(u.a)(D,2),_=U[0],A=U[1],T=Object(s.useState)(),P=Object(u.a)(T,2),R=P[0],B=P[1],F=e.match.params.uID;return Object(s.useEffect)((function(){le.getUserSongs(F).then((function(e){return S(e)})),le.getUserData(F).then((function(e){return N(e)})),d.a.auth().onAuthStateChanged((function(e){le.getUserData(e.uid).then((function(e){return B(e.public.profile.info.name)}))}))}),[F]),Object(s.useEffect)((function(){g&&(L(g.public.profile.info.name),A(g.public.profile.pfp.url),i(g.public.profile.pfp.x),b(g.public.profile.pfp.y),m(g.public.profile.pfp.zoom))}),[g]),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{id:"profile",className:"main",children:[Object(c.jsxs)("div",{class:"profile-container",children:[Object(c.jsxs)("div",{className:"cover-pic",children:[Object(c.jsx)("img",{src:""}),Object(c.jsx)("div",{className:"User-Name",children:Object(c.jsx)("h1",{children:E})})]}),Object(c.jsx)("div",{className:"pfp",children:Object(c.jsx)("div",{className:"pfp-container",children:Object(c.jsx)("pfp",{className:"pfp-box",children:Object(c.jsx)("img",{src:_,style:{transform:"translate(".concat(a-50,"px, ").concat(l-50,"px) scale(").concat(parseInt(O)/100+1,")")}})})})}),Object(c.jsx)("div",{class:"tabsContainer",children:Object(c.jsxs)("div",{class:"tabs-holder",children:[Object(c.jsx)(v.b,{to:"/u/"+F+"/music",activeClassName:"Music-Nav-Active",children:Object(c.jsx)("button",{children:Object(c.jsx)("span",{children:"Music"})})}),Object(c.jsx)(v.b,{to:"/u/"+F+"/playlist",activeClassName:"PlayList-Nav-Active",children:Object(c.jsx)("button",{children:Object(c.jsx)("span",{children:"Playlist"})})}),Object(c.jsx)("button",{children:Object(c.jsx)("span",{children:"About"})})]})})]}),Object(c.jsx)(j.a,{to:"/u/"+F+"/music"}),Object(c.jsxs)(j.d,{children:[Object(c.jsx)(j.b,{exact:!0,path:"/u/"+F+"/music",children:Object(c.jsx)(oe,{musics:k,play:function(t){console.log(e),e.play(t)},uID:F,userName:R,pfp:_,user:E,stop:function(){e.stop()},audio:e.audio})}),Object(c.jsx)(j.b,{exact:!0,path:"/u/"+F+"/playlist"})]})]})})},de=new f;var je=function(e){var t=Object(s.useState)(),n=Object(u.a)(t,2),a=n[0],i=n[1],r=Object(s.useState)([]),o=Object(u.a)(r,2),l=o[0],b=o[1],p=new URLSearchParams(Object(j.h)().search).get("search");function h(t){e.play(t)}function O(){e.stop()}return console.log(p),Object(s.useEffect)((function(){d.a.auth().onAuthStateChanged((function(e){d.a.database().ref("users/"+e.uid+"/praivate/login credentials").on("value",(function(e){e.val()&&i(e.val().userName)}))}))}),[]),Object(s.useEffect)((function(){de.searchQ(p).then((function(e){return b(e)}))}),[p]),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{id:"home",className:"main",children:Object(c.jsx)("div",{className:"music-content-container",id:"home-musics",children:Object(c.jsx)("div",{className:"music-box",children:Object(c.jsxs)("div",{className:"user-musics",children:[l&&l.map((function(t,n){return Object(c.jsx)(s.Fragment,{children:Object(c.jsx)(z,{name:t,play:h,stop:O,uID:t.userID,userName:a,pfp:t.pfpURL,user:t.artist,audio:e.audio})},n)})),0==l.length?Object(c.jsx)("span",{children:"no results found"}):null]})})})})})};n(124),new f;var be=function(e){var t,n=Object(s.useState)(),a=Object(u.a)(n,2),i=a[0],r=a[1],o=Object(s.useState)(),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(s.useState)(),p=Object(u.a)(b,2),h=p[0],O=p[1],m=Object(s.useState)(),f=Object(u.a)(m,2),x=f[0],v=f[1],g=Object(s.useState)(!1),N=Object(u.a)(g,2),y=N[0],w=N[1],k=Object(s.useState)(),C=Object(u.a)(k,2),I=C[0],E=C[1],L=Object(s.useContext)(S);return Object(s.useEffect)((function(){e.nowPlaying||(Array.isArray(e.tracks)?L.playlistIncludes(L.getCurrentSong())?r(L.getCurrentSong()):r(e.tracks[0]):r(e.tracks))}),[e]),Object(s.useEffect)((function(){i&&(j(i.info.title),O(i.src.imageURL),v(i.info.artist),E(i.info.description),L.audio.src==i.src.aduioURL&&0==L.audio.paused?w(!0):w(!1))}),[i,null===(t=L.audio)||void 0===t?void 0:t.src,null===i||void 0===i?void 0:i.src.aduioURL,L.audio.paused]),Object(c.jsx)("div",{className:e.top||"top",children:Object(c.jsxs)("div",{className:"top-container",children:[Object(c.jsx)("div",{className:"bg-blur",style:{backgroundImage:'linear-gradient(to bottom, rgba(0, 0, 0, 0), var(--dark-secondary)), url("'.concat(h,'")')}}),Object(c.jsxs)("div",{className:"top-contents",children:[Object(c.jsx)("div",{className:"top-albumCover-wrapper",children:Object(c.jsx)("div",{className:"top-albumCover",style:{backgroundImage:'url("'.concat(h,'")')}})}),Object(c.jsxs)("div",{className:"top-info",children:[Object(c.jsx)("div",{className:"top-title",children:Object(c.jsx)("h2",{children:d})}),Object(c.jsx)("div",{className:"top-description",children:Object(c.jsx)("span",{children:I})}),Object(c.jsx)("div",{className:"top-artist-name",children:Object(c.jsx)("span",{children:x})})]}),Object(c.jsxs)("div",{className:"top-buttons",children:[Object(c.jsx)("div",{className:"top-play-botton",children:y?Object(c.jsx)("button",{onClick:function(){e.stop(),w(!1)},children:"pause"}):Object(c.jsx)("button",{onClick:function(){e.play(i),w(!0)},children:"play"})}),Object(c.jsx)("div",{className:"top-more-button"})]})]})]})})},pe=function(){function e(t){Object(O.a)(this,e),this.audio=new Audio,this.songArray=[],this.i=-1}return Object(m.a)(e,[{key:"play",value:function(){var e=this;this.audio.play(),this.i=this.songArray.indexOf(this.song),this.audio.addEventListener("ended",(function(t){if(e.i>-1&&e.i<e.songArray.length){var n=e.getNextSong();n&&e.playSong(n)}})),-1==this.i&&(this.songArray=[],this.songArray.push(this.song),this.i++),console.log(this.songArray),this.audio.addEventListener("play",(function(t){e.audio.currentTime})),this.audio.addEventListener("pause",(function(t){e.audio.currentTime})),this.audio.addEventListener("ended",(function(t){e.audio.currentTime})),this.audio.addEventListener("timeupdate",(function(t){e.audio.currentTime}))}},{key:"stop",value:function(){this.audio.pause()}},{key:"loadSongs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"song";"playlist"===t?this.songArray=e:"song"===t&&this.songArray.push(e)}},{key:"removeSongs",value:function(e){var t=this.songArray.filter((function(t){return t!=e}));this.songArray=t}},{key:"getNextSong",value:function(){return this.songArray&&this.i>-1&&this.i<this.songArray.length?this.songArray[this.i+1]:null}},{key:"getPreviousSong",value:function(){if(this.songArray&&this.i>0&&this.i<this.songArray.length){var e=this.songArray[this.i-1];return console.log(e),e}return null}},{key:"playSong",value:function(e){this.song=e,this.audio.src=e.src.aduioURL,this.play(e)}},{key:"like",value:function(e){var t={likedBy:e,likedOf:this.song.info.uid,song_name:this.song.info.songID||this.song.info.title,song:this.song};this.postData("/api/music/like/send",t)}},{key:"updateViews",value:function(e){var t={initialTime:e.initialTime,finalTime:e.finalTime,songID:this.song.info.songID||this.song.info.title,uid:this.song.info.uid};this.postData("/api/music/views/update",t)}},{key:"createPlaylists",value:function(e){this.songArray=[],this.loadSongs(e.songs,"playlist")}},{key:"volumeHandler",value:function(e){this.audio.volume=e}},{key:"getCurrentSong",value:function(){return this.song}},{key:"getDuration",value:function(){return this.audio.duration?Math.floor(this.audio.duration/60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+":"+Math.floor(this.audio.duration%60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}):"00:00"}},{key:"getCurrentTime",value:function(){return this.audio.currentTime?Math.floor(this.audio.currentTime/60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+":"+Math.floor(this.audio.currentTime%60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}):"00:00"}},{key:"isPaused",value:function(){return this.audio.paused}},{key:"playlistIncludes",value:function(e){return this.songArray.includes(e)}},{key:"showPlaylists",value:function(){return this.songArray}},{key:"postData",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,c,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 4:return c=e.sent,e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),he=function(){function e(t,n){Object(O.a)(this,e),this.songs=n||[],this.playlistName=t}return Object(m.a)(e,[{key:"createNewPlaylist",value:function(e,t){this.playlistName=e,this.songs=t}},{key:"addSong",value:function(e){this.songs.push(e)}},{key:"removeSong",value:function(e){var t=this.songs.filter((function(t){return t!==e}));this.songs=t}},{key:"getSongs",value:function(){return this.songs}}]),e}(),Oe=new f;var me=function(e){var t=Object(s.useContext)(S),n=Object(s.useState)(null),a=Object(u.a)(n,2),i=a[0],r=a[1],o=Object(s.useState)(null),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(s.useState)(null),p=Object(u.a)(b,2),h=(p[0],p[1],Object(s.useContext)(k));return Object(s.useEffect)((function(){if(h){var e=[];Oe.getUserLikes(h).then((function(e){return e})).then((function(t){t.forEach((function(t){Oe.getSongsById(t.id,t.song_id).then((function(t){return e.push(t)})).then((function(){return r(e)}))}))}))}}),[h]),Object(s.useEffect)((function(){if(i){var e=new he;e.createNewPlaylist("Likes",i),t.createPlaylists(e),console.log(t.showPlaylists()),j(t.showPlaylists())}}),[i]),Object(c.jsx)("div",{id:"userLikes",className:"main",children:Object(c.jsx)("div",{className:"music-content-container",id:"userLikes-music",children:Object(c.jsx)("div",{className:"music-box",id:"userLikes-box",children:Object(c.jsx)(be,{tracks:d,nowPlaying:null,play:e.play,audio:e.audio,stop:e.stop})})})})},fe=(n(125),new f);var xe=function(e){var t=new URLSearchParams(Object(j.h)().search),n=Object(s.useState)(null),a=Object(u.a)(n,2),i=a[0],r=a[1],o=t.get("m"),l=t.get("uid");return Object(s.useEffect)((function(){t&&fe.getSongsById(l,o).then((function(e){r(e)}))}),[o]),Object(c.jsx)("div",{id:"listen",className:"main",children:Object(c.jsx)("div",{className:"music-content-container",id:"listen-music",children:Object(c.jsx)("div",{className:"music-box",id:"listen-box",children:Object(c.jsx)(be,{tracks:i,nowPlaying:null,play:e.play,audio:e.audio,stop:e.stop,top:"top-listen"})})})})},ve=new Audio,ge=new pe;new he;var Ne=function(){var e,t,n=function(){var e=Object(s.useState)(0),t=Object(u.a)(e,2),n=(t[0],t[1]);return function(){return n((function(e){return e+1}))}}(),a=Object(s.useState)("0%"),i=Object(u.a)(a,2),r=i[0],b=(i[1],Object(s.useState)()),p=Object(u.a)(b,2),h=p[0],O=(p[1],Object(s.useState)(null)),m=Object(u.a)(O,2),f=m[0],g=m[1],N=Object(s.useState)(),y=Object(u.a)(N,2);y[0],y[1],d.a.auth().onAuthStateChanged((function(e){return g(e.uid)}));var w=d.a.database();function C(e){n(),ge.audio.src===e.src.aduioURL?(ge.play(),t=e.title):(ge.playSong(e),t=e.info.songID||e.info.title),ve&&ve.addEventListener("timeupdate",(function(){if(t){var n,c,s=ve.currentTime;if(s>30&&s<30.2)console.log(3e3),w.ref("users/"+e.info.userID+"/public/songs/"+t+"/stats").once("value").then((function(e){n=e.val().views,c=n+1})).then((function(){w.ref("users/"+e.info.userID+"/public/songs/"+t+"/stats").update({views:c}).then((function(){w.ref("public/songs/"+t).update({views:c})}))}))}}))}function I(e){n(),ge.stop()}return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(v.a,{children:Object(c.jsxs)(j.d,{children:[Object(c.jsx)(j.b,{path:"/login",exact:!0,component:ee}),Object(c.jsx)(j.b,{path:"/Signup",exact:!0,component:se}),Object(c.jsx)("div",{className:"blue",id:"main-render",children:Object(c.jsx)(k.Provider,{value:f,children:Object(c.jsxs)(S.Provider,{value:ge,children:[Object(c.jsx)(j.b,{exact:!0,path:"/about",render:function(e){return Object(c.jsx)(R,Object(l.a)({},e))}}),Object(c.jsx)(j.b,{path:"/upload",component:re}),Object(c.jsx)(j.b,{exact:!0,path:"/account/edit",component:x}),Object(c.jsx)(j.b,{path:"/u/:uID",render:function(e){return Object(c.jsx)(ue,Object(l.a)(Object(l.a)({},e),{},{play:C,stop:I,audio:ve}))}}),Object(c.jsx)(j.b,(e={exact:!0,path:"/"},Object(o.a)(e,"exact",!0),Object(o.a)(e,"render",(function(e){return Object(c.jsx)(V,Object(l.a)(Object(l.a)({},e),{},{play:C,stop:I,audio:ve}))})),e)),Object(c.jsx)(j.b,{path:"/results",exact:!0,render:function(e){return Object(c.jsx)(je,Object(l.a)(Object(l.a)({},e),{},{play:C,stop:I,audio:ve}))}}),Object(c.jsx)(j.b,{path:"/listen",exact:!0,render:function(e){return Object(c.jsx)(xe,Object(l.a)(Object(l.a)({},e),{},{play:C,stop:I,audio:ve}))}}),Object(c.jsx)(j.b,{path:"/liked",exact:!0,render:function(e){return Object(c.jsx)(me,Object(l.a)(Object(l.a)({},e),{},{play:C,stop:I,audio:ve}))}}),Object(c.jsx)(P,{}),Object(c.jsx)(D,{}),Object(c.jsx)(_,{progVal:r,stop:I,playAudio:function(){n(),ge.play()},audio:ve,volumeHandler:function(e){ve.volume=e},AudioInfo:h,next:function(){n(),console.log(ge.getNextSong());var e=ge.getNextSong();e&&ge.playSong(e)},previous:function(){n();var e=ge.getPreviousSong();e&&ge.playSong(e)}})]})})})]})})})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,127)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),a(e),i(e)}))};r.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(Ne,{})}),document.getElementById("root")),ye()},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},82:function(e,t,n){},91:function(e,t,n){}},[[126,1,2]]]);
//# sourceMappingURL=main.3f7bc42e.chunk.js.map