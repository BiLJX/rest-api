(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[0],{121:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(3),a=n.n(s),i=n(60),r=n.n(i),o=(n(69),n(24)),l=n(18),u=n(4),d=(n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(8));n(82);var j=n(6),b=n.n(j),p=n(12),h=n(26),O=n(27),m=function(){function e(t){Object(h.a)(this,e),this.uid=t}return Object(O.a)(e,[{key:"getPopular",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/home/popular",{mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getTrending",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/home/trending",{mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getRecommend",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/home/recomended?uid="+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserSongs",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/u/musics?uid="+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSongsById",value:function(){var e=Object(p.a)(b.a.mark((function e(t,n){var c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/listen?uid="+t+"&song="+n);case 2:return c=e.sent,e.next=5,c.json();case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUserData",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/u/data?uid="+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchQ",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==t||null==t){e.next=8;break}return e.next=3,fetch("/api/home/result?search="+t,{mode:"cors"});case 3:return n=e.sent,e.next=6,n.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNotifications",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,fetch("/api/u/notification?uid="+t,{mode:"cors"});case 3:return n=e.sent,e.next=6,n.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkName",value:function(e){if(null!=e||""!=e)return this.postData("/api/profile/checkname",{name:e})}},{key:"update_profile",value:function(e){this.url&&(e.data.pfp.url=this.url),console.log(e);this.postData("/api/profile/update",{update:e})}},{key:"upload",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var n,c,s=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t,c=d.a.storage(),"/api/music/upload",c.ref("public/songs/"+t.genre+"/"+t.title).child(t.image.name).put(t.image).then((function(e){return e.ref.getDownloadURL()})).then((function(e){console.log(e),n.imageURL=e})),c.ref("public/songs/"+t.genre+"/"+t.title).child(t.file.name).put(t.file).then((function(e){return e.ref.getDownloadURL()})).then((function(e){return n.audioURL=e})).then((function(){return s.postData("/api/music/upload",n)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserLikes",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/home/liked?uid="+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update_profile_pic",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var n,c=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.a.storage(),e.next=3,n.ref("/users/profile/pfp").child(t.name).put(t).then((function(e){return e.ref.getDownloadURL()})).then((function(e){return c.url=e})).then((function(){return console.log("completed")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendLike",value:function(e,t,n,c){var s={likedBy:e,likedOf:t,songID:n,song:c};this.postData("/api/music/like/send",s)}},{key:"postData",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t,n,c,s=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 4:return c=e.sent,e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();var f=function(){var e;d.a.auth().onAuthStateChanged((function(t){e=t.uid}));var t=new m(e);document.title="Edit Profile";var n=Object(s.useState)(),a=Object(u.a)(n,2),i=a[0],r=a[1],o=Object(s.useState)(50),l=Object(u.a)(o,2),j=l[0],b=l[1],p=Object(s.useState)(50),h=Object(u.a)(p,2),O=h[0],f=h[1],x=Object(s.useState)(0),v=Object(u.a)(x,2),g=v[0],N=v[1],y=Object(s.useState)(null),w=Object(u.a)(y,2),k=w[0],S=w[1],C=Object(s.useState)(null),I=Object(u.a)(C,2),E=I[0],D=I[1],L=Object(s.useState)(null),U=Object(u.a)(L,2),_=U[0],A=U[1],T=Object(s.useState)(null),P=Object(u.a)(T,2),R=P[0],B=P[1],F=Object(s.useState)(null),M=Object(u.a)(F,2),H=M[0],z=M[1];return Object(c.jsx)("div",{id:"edit-profile",className:"main",children:Object(c.jsx)("div",{className:"edit-profile-container",children:Object(c.jsxs)("div",{className:"edit-profile-box",children:[Object(c.jsxs)("div",{className:"edit-head-wrapper",children:[Object(c.jsx)("div",{className:"edit-head",children:Object(c.jsx)("span",{children:"Edit Your Profile"})}),Object(c.jsx)("div",{className:"line",id:"edit-line"})]}),Object(c.jsxs)("div",{className:"profile-form-container",children:[Object(c.jsxs)("div",{className:"pfp-preview",children:[Object(c.jsxs)("div",{className:"pfp-preview-box",children:[Object(c.jsxs)("div",{className:"crop-container",children:[Object(c.jsx)("div",{className:"crop"}),Object(c.jsx)("img",{src:H,alt:"image-preview",id:"preview",style:{transform:"translate(".concat(j-50,"px, ").concat(O-50,"px) scale(").concat(parseInt(g)/100+1,")")}})]}),Object(c.jsxs)("div",{className:"upload-pfp",children:[Object(c.jsx)("input",{type:"file",id:"upload-pfp-btn",hidden:!0,onChange:function(e){return t=e.target.files,r(t[0]),void z(URL.createObjectURL(t[0]));var t}}),Object(c.jsx)("label",{htmlFor:"upload-pfp-btn",children:Object(c.jsx)("span",{children:"Upload file"})})]})]}),Object(c.jsx)("div",{className:"sliders",children:Object(c.jsxs)("div",{className:"slider-box",children:[Object(c.jsx)("div",{className:"slider-x",children:Object(c.jsx)("input",{type:"range",value:j,onChange:function(e){return b(e.target.value)}})}),Object(c.jsx)("div",{className:"slider-y",children:Object(c.jsx)("input",{type:"range",value:O,onChange:function(e){return f(e.target.value)}})}),Object(c.jsx)("div",{className:"slider-zoom",children:Object(c.jsx)("input",{type:"range",value:g,onChange:function(e){return N(e.target.value)}})})]})})]}),Object(c.jsxs)("div",{className:"profile-form",children:[Object(c.jsxs)("div",{className:"display-name",children:[Object(c.jsx)("div",{className:"form-label",children:Object(c.jsx)("span",{children:"Display Name"})}),Object(c.jsx)("div",{className:"display-name-input",children:Object(c.jsx)("input",{className:"-input-form",type:"text",placeholder:"Name...",onKeyUp:function(e){return S(e.target.value)}})})]}),Object(c.jsxs)("div",{className:"first Name",children:[Object(c.jsx)("div",{className:"form-label",children:Object(c.jsx)("span",{children:"First Name"})}),Object(c.jsx)("div",{className:"first-name-input",children:Object(c.jsx)("input",{className:"-input-form",type:"text",placeholder:"First Name...",onKeyUp:function(e){return D(e.target.value)}})})]}),Object(c.jsxs)("div",{className:"last Name",children:[Object(c.jsx)("div",{className:"form-label",children:Object(c.jsx)("span",{children:"Last Name"})}),Object(c.jsx)("div",{className:"last-name-input",children:Object(c.jsx)("input",{className:"-input-form",type:"text",placeholder:"Last Name...",onKeyUp:function(e){return A(e.target.value)}})})]}),Object(c.jsxs)("div",{className:"bio",children:[Object(c.jsx)("div",{className:"form-label",children:Object(c.jsx)("span",{children:"Bio"})}),Object(c.jsx)("div",{className:"bio-input",children:Object(c.jsx)("textarea",{className:"-input-form",type:"text",placeholder:"describe yourself...",onKeyUp:function(e){return B(e.target.value)}})})]})]}),Object(c.jsxs)("div",{className:"save-cancel",children:[Object(c.jsx)("div",{className:"cancel",children:Object(c.jsx)("button",{onClick:function(){},children:"Cancel"})}),Object(c.jsx)("div",{className:"save",children:Object(c.jsx)("button",{onClick:function(){var n={data:{info:{name:k,firstName:E,lastName:_,bio:R},pfp:{url:"",x:j,y:O,zoom:g}},temp:{userId:e}};i?t.update_profile_pic(i).then((function(){t.update_profile(n)})):t.update_profile(n)},children:"Save"})})]})]})]})})})},x=n(7);n(84);var v=function(e){var t=Object(s.useState)(),n=Object(u.a)(t,2),a=(n[0],n[1]);return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"dropdown-wrapper",children:Object(c.jsx)("div",{className:"dropdown",children:Object(c.jsx)("div",{className:"dropdown-box",children:Object(c.jsx)("div",{className:"dropdown-lists",children:Object(c.jsxs)("ul",{children:[Object(c.jsx)(x.b,{to:"/u/"+e.uid+"/music",children:Object(c.jsx)("li",{children:"Profile"})}),Object(c.jsx)("li",{children:"#"}),Object(c.jsx)("li",{children:"#"}),Object(c.jsx)("li",{children:"#"}),Object(c.jsx)("li",{onClick:function(){return a("dark")},children:"Dark Mode"}),Object(c.jsx)("li",{children:"Sign Out"})]})})})})})})},g=n(11),N=n(62),y=n.n(N);var w=function(e){var t=Object(s.useState)(),n=Object(u.a)(t,2),c=n[0],a=n[1];return Object(s.useEffect)((function(){if(e){var t=y()("http://localhost:3000/",{transport:["websocket"],query:{id:e}});return a(t),function(){return t.close()}}}),[e]),c},k=Object(s.createContext)(null),S=Object(s.createContext)(null),C=new m;var I=function(e){var t=e.notification,n=Object(s.useState)(),a=Object(u.a)(n,2),i=a[0],r=a[1],o=Object(s.useState)(),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(s.useState)(),p=Object(u.a)(b,2),h=p[0],O=p[1],m=Object(s.useState)(),f=Object(u.a)(m,2),x=f[0],v=f[1],g=Object(s.useState)(),N=Object(u.a)(g,2),y=N[0],w=N[1],k=Object(s.useState)(),S=Object(u.a)(k,2),I=S[0],E=S[1],D=Object(s.useState)(),L=Object(u.a)(D,2),U=L[0],_=L[1],A=Object(s.useState)(null),T=Object(u.a)(A,2),P=T[0],R=T[1];return Object(s.useEffect)((function(){t&&(C.getUserData(t.likedBy).then((function(e){w(e)})),console.log(t.type),"like"==t.type?(r("liked your"),_("song "+t.title)):"comment"==t.type?r("commented"):"followed"==t.type&&r("followed you"))}),[t]),Object(s.useEffect)((function(){y&&(E(y.public.profile.info.name),R(y.public.profile.pfp.url),j(y.public.profile.pfp.x),O(y.public.profile.pfp.y),v(y.public.profile.pfp.zoom),console.log(y))}),[y]),Object(c.jsxs)("div",{className:"notification-items",children:[Object(c.jsx)("div",{className:"notification-profile",children:Object(c.jsx)("div",{className:"pfp",id:"notfication-pfp",children:Object(c.jsx)("div",{className:"pfp-container",id:"notfication-pfp-container",children:Object(c.jsx)("pfp",{className:"pfp-box",id:"notfication-pfp-box",children:Object(c.jsx)("img",{id:"notfication-pfp-img",src:P,style:{transform:"translate(".concat(d-50,"px, ").concat(h-50,"px) scale(").concat(parseInt(x)/100+1,")")}})})})})}),Object(c.jsxs)("div",{className:"notification-info",children:[Object(c.jsx)("div",{className:"notification-userName",children:I}),Object(c.jsx)("div",{className:"notfication-type",children:Object(c.jsx)("span",{children:i})}),Object(c.jsx)("div",{className:"notification-activity",children:Object(c.jsx)("span",{children:U})})]})]})},E=(n(121),new m);var D=function(e){var t=Object(s.useContext)(k),n=Object(s.useState)(null),a=Object(u.a)(n,2),i=a[0],r=a[1];return Object(s.useEffect)((function(){E.getNotifications(t).then((function(e){return r(e)}))}),[t]),Object(c.jsx)("div",{id:"notification",children:Object(c.jsx)("div",{className:"notification-container",children:Object(c.jsxs)("div",{className:"notification-box",children:[Object(c.jsx)("div",{className:"notfication-header",children:Object(c.jsx)("span",{children:"Notifications"})}),Object(c.jsx)("div",{className:"notification-contents",children:i&&i.slice(0).reverse().map((function(e,t){return Object(c.jsx)(I,{notification:e},t)}))})]})})})},L=new m;var U=function(e){var t=Object(s.useState)(!0),n=Object(u.a)(t,2),a=n[0],i=n[1],r=Object(s.useState)(!0),o=Object(u.a)(r,2),l=o[0],j=o[1],b=Object(s.useState)(null),p=Object(u.a)(b,2),h=p[0],O=p[1],m=Object(s.useState)(null),f=Object(u.a)(m,2),N=f[0],y=(f[1],Object(s.useState)(null)),C=Object(u.a)(y,2),I=C[0],E=C[1],U=Object(g.g)(),_=Object(s.useState)(!1),A=Object(u.a)(_,2),T=A[0],P=A[1],R=Object(s.useState)(!0),B=Object(u.a)(R,2),F=B[0],M=B[1],H=Object(s.useState)(),z=Object(u.a)(H,2),K=z[0],G=z[1],J=Object(s.useContext)(k),W=(Object(s.useContext)(S),w(J));function Q(e){V(e.target.getAttribute("data-name"))}function V(e){M(!0),""!=e&&U.push("/results?search="+e)}return Object(s.useEffect)((function(){W&&W.on("notification",(function(e){e&&P(e.newNotification)}))}),[J,W]),d.a.auth().onAuthStateChanged((function(e){e?E(e.uid):U.push("/login")})),window.onclick=function(e){"searchBar"!==e.target.id&&M(!0),"profile-drop"==e.target.id&&l?j(!1):("profile-drop"!==e.target.id||"profile-drop"==e.target.id&&0==l)&&j(!0),"notification-button"==e.target.id&&a?(P(!1),i(!1)):"notification-button"==e.target.id&&0==a?i(!0):"notification-box"==e.target.className?M(!1):i(!0)},Object(s.useEffect)((function(){""!=h?(M(!1),L.searchQ(h).then((function(e){return G(e)}))):M(!0)}),[h]),Object(c.jsx)("header",{children:Object(c.jsxs)("div",{id:"hd-container",children:[Object(c.jsx)("div",{id:"logo-contain",children:Object(c.jsx)(x.b,{to:"/",children:Object(c.jsx)("h1",{})})}),Object(c.jsxs)("div",{id:"search",children:[Object(c.jsx)("div",{className:"bar",children:Object(c.jsx)("input",{id:"searchBar",placeholder:"search",autoComplete:"off",onKeyUp:function(e){return"Enter"==e.key?V(h):null},onChange:function(e){O(e.target.value.toLocaleLowerCase())}})}),Object(c.jsx)("div",{className:"searchBtn",children:Object(c.jsx)("span",{id:"srhBtn",className:"material-icons",onClick:function(){return V(h)},children:"search"})}),F?null:Object(c.jsx)("div",{className:"searchList-wrapper",children:Object(c.jsx)("div",{className:"searchList-holder",children:Object(c.jsx)("ul",{children:K&&K.map((function(e,t){return Object(c.jsx)("li",{className:"lists",children:Object(c.jsx)("div",{className:"search-list",children:Object(c.jsxs)("span",{onClick:Q,"data-name":e.info.title,id:"autolist",children:[" ",e.info.title]})})},t)}))})})})]}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{id:"buttons",children:[Object(c.jsx)("div",{className:"profile",children:Object(c.jsx)("img",{src:N,height:"25",width:"25",alt:"",id:"profile-drop"})}),Object(c.jsx)("div",{className:"notification-button",children:T?Object(c.jsx)("span",{id:"notification-button",className:"material-icons",children:"notifications_active"}):Object(c.jsx)("span",{id:"notification-button",className:"material-icons",children:"notifications"})})]}),a?null:Object(c.jsx)(D,{}),l?null:Object(c.jsx)(v,{uid:I})]})]})})};var _=function(){var e=Object(s.useContext)(S),t=Object(s.useState)(),n=Object(u.a)(t,2),a=n[0],i=n[1];return Object(s.useEffect)((function(){i(e.getCurrentSong())}),[e.getCurrentSong()]),Object(c.jsx)("div",{id:"audio-preview",children:Object(c.jsx)("div",{className:"audio-preview-container",children:Object(c.jsx)("div",{className:"audio-preview-box",children:Object(c.jsxs)("div",{className:"audio-preview-contents",children:[Object(c.jsx)("div",{className:"audio-preview-image",children:Object(c.jsx)("div",{className:"image",style:{backgroundImage:'url("'.concat(a?a.src.imageURL:null,'")')}})}),Object(c.jsxs)("div",{className:"audio-preview-context",children:[Object(c.jsx)("div",{className:"audio-preview-title",children:Object(c.jsx)("span",{children:a?a.info.title:"unknown"})}),Object(c.jsx)("div",{className:"audio-preview-artist",children:Object(c.jsx)("span",{children:a?a.info.artist:"unknown"})})]})]})})})})};var A=function(e){var t=Object(s.useContext)(S),n=Object(s.useState)(0),a=Object(u.a)(n,2),i=a[0],r=a[1],o=Object(s.useState)(1),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(s.useState)(t.getCurrentTime()),p=Object(u.a)(b,2),h=p[0],O=p[1];return Object(s.useEffect)((function(){t.audio.addEventListener("timeupdate",(function(e){var n=t.audio.currentTime/t.audio.duration*100;O(t.getCurrentTime()),r(n)}))}),[e.AudioInfo]),Object(s.useEffect)((function(){t.volumeHandler(d)}),[d]),Object(c.jsx)("div",{className:"audio-wrapper",children:Object(c.jsx)("div",{className:"audio-container",children:Object(c.jsxs)("div",{className:"audio-box",children:[Object(c.jsx)(_,{audio:e.AudioInfo}),Object(c.jsxs)("div",{className:"audio_elements-container",children:[Object(c.jsxs)("div",{className:"play_btn-container",children:[Object(c.jsx)("div",{className:"play-container",children:t.audio.paused?Object(c.jsx)("span",{onClick:function(){e.playAudio()},id:"play_btn",className:"material-icons",children:"play_arrow"}):Object(c.jsx)("span",{onClick:function(t){e.stop()},id:"play_btn",className:"material-icons",children:"pause"})}),Object(c.jsx)("span",{className:"material-icons",id:"fast_rewind",onClick:function(){return e.previous()},children:"skip_previous"}),Object(c.jsx)("span",{className:"material-icons",id:"fast_forward",onClick:function(){return e.next()},children:"skip_next"})]}),Object(c.jsx)("div",{className:"progress_div",children:Object(c.jsx)("div",{class:"progress_holder",id:"prog_holder",onMouseDown:function(e){e.preventDefault();var n=(e.target||e.srcElement).getBoundingClientRect(),c=(e.clientX-n.left)/document.documentElement.offsetWidth;console.log(c),t.audio.currentTime=c*t.audio.duration*1.9},onMouseUp:function(e){e.preventDefault();var n=(e.target||e.srcElement).getBoundingClientRect(),c=(e.clientX-n.left)/document.documentElement.offsetWidth;console.log(c),t.audio.currentTime=c*t.audio.duration*1.9},children:Object(c.jsx)("div",{id:"progress_meter",style:{width:i+"%"}})})}),Object(c.jsx)("div",{className:"current",children:Object(c.jsx)("span",{children:h})}),Object(c.jsx)("div",{className:"duration",children:Object(c.jsx)("span",{children:t.getDuration()})}),Object(c.jsxs)("div",{className:"volume",children:[Object(c.jsx)("div",{className:"volume-i",children:Object(c.jsx)("span",{class:"material-icons",children:"volume_up"})}),Object(c.jsx)("div",{className:"volume_slider",children:Object(c.jsx)("input",{type:"range",onChange:function(e){return j(e.target.value/100)},value:100*d})})]})]})]})})})};var T=function(){return Object(c.jsxs)("div",{className:"nav-div1",children:[Object(c.jsx)("span",{className:"nav-heading",children:"Navigation"}),Object(c.jsxs)("ul",{children:[Object(c.jsx)(x.b,{to:"/",exact:!0,activeClassName:"btn-active",children:Object(c.jsxs)("li",{className:"btn",children:[Object(c.jsx)("span",{class:"material-icons",children:"home"}),Object(c.jsx)("p",{children:"Home"})]})}),Object(c.jsx)(x.b,{to:"/explore",children:Object(c.jsxs)("li",{className:"btn",children:[Object(c.jsx)("span",{class:"material-icons",children:"explore"}),Object(c.jsx)("p",{children:"explore"})]})}),Object(c.jsx)(x.b,{to:"/upload",exact:!0,activeClassName:"btn-active",children:Object(c.jsxs)("li",{className:"btn",children:[Object(c.jsx)("span",{class:"material-icons md-dark md-inactive",children:"upload"}),Object(c.jsx)("p",{children:"upload"})]})}),Object(c.jsx)(x.b,{to:"/account/edit",exact:!0,activeClassName:"btn-active",children:Object(c.jsxs)("li",{className:"btn",id:"ab",children:[Object(c.jsx)("span",{class:"material-icons",children:"perm_identity"}),Object(c.jsx)("p",{children:"edit"})]})})]})]})};var P=function(){var e=Object(s.useContext)(k);return Object(c.jsxs)("div",{className:"nav-div2",children:[Object(c.jsx)("span",{className:"nav-heading",children:"Library"}),Object(c.jsxs)("ul",{children:[Object(c.jsx)(x.b,{to:"/history",exact:!0,activeClassName:"btn-active",children:Object(c.jsxs)("li",{className:"btn",children:[Object(c.jsx)("span",{class:"material-icons",children:"history"}),Object(c.jsx)("p",{children:"history"})]})}),Object(c.jsx)(x.b,{to:"/liked",exact:!0,activeClassName:"btn-active",children:Object(c.jsxs)("li",{className:"btn",children:[Object(c.jsx)("span",{class:"material-icons",children:"favorite"}),Object(c.jsx)("p",{children:"Liked"})]})}),Object(c.jsx)(x.b,{to:"/u/"+e+"/music",exact:!0,activeClassName:"btn-active",children:Object(c.jsxs)("li",{className:"btn",children:[Object(c.jsx)("span",{class:"material-icons md-dark md-inactive",children:"album"}),Object(c.jsx)("p",{children:"Your Music"})]})})]})]})};var R=function(){return d.a.auth().onAuthStateChanged((function(e){e})),Object(c.jsx)("div",{id:"nav",children:Object(c.jsxs)("nav",{children:[Object(c.jsx)("div",{className:"nav-heading",children:Object(c.jsx)("h2",{children:"Moosax"})}),Object(c.jsxs)("div",{className:"main-nav",children:[Object(c.jsx)(T,{}),Object(c.jsx)(P,{}),Object(c.jsx)("div",{className:"line",id:"nav-line"})]}),Object(c.jsxs)("div",{className:"signout",onClick:function(){return d.a.auth().signOut()},children:[Object(c.jsx)("span",{className:"material-icons",children:"login"}),Object(c.jsx)("p",{children:"signout"})]})]})})};var B=function(e){return console.log(e),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{id:"about",className:"main",children:Object(c.jsx)("div",{className:"headingCont",children:Object(c.jsx)("h1",{children:"This is About"})})})})},F=new m;var M=function(e){var t,n=e.uID,a=e.music;d.a.auth().currentUser&&(t=d.a.auth().currentUser.uid),e.name;var i=e.userName,r=Object(s.useState)(a.stats.likes),o=Object(u.a)(r,2),l=o[0],j=o[1],b=Object(s.useState)(),p=Object(u.a)(b,2),h=p[0],O=p[1],m=a.widgetInfo&&void 0!=a.widgetInfo.likes[t];return Object(s.useEffect)((function(){O(!!m)}),[i]),Object(c.jsxs)("div",{class:"like",children:[Object(c.jsx)("i",{class:"material-icons",onClick:function(){F.sendLike(t,n,a.info.songID,a),h?(j(l-1),O(!1)):(O(!0),j(l+1))},children:h?Object(c.jsx)("p",{children:"favorite"}):Object(c.jsx)("p",{children:"favorite_border"})}),Object(c.jsx)("span",{children:l})]})},H=n.p+"static/media/Hover1.01e40da2.mp3";var z=function(e){var t=Object(s.useRef)(),n=Object(s.useState)(!0),a=Object(u.a)(n,2),i=a[0],r=a[1],o=Object(s.useContext)(S),l=e.name,d=e.userName;return Object(s.useEffect)((function(){(o.audio.src!=l.src.aduioURL||o.audio.paused)&&r(!0),o.audio.src!=l.src.aduioURL||o.audio.paused||r(!1)}),[o.audio.src,l.src.aduioURL,o.audio.paused]),Object(c.jsxs)("div",{className:"music-preview-box",children:[Object(c.jsx)("audio",{id:"sfx",src:H,ref:t,type:"audio/mpeg"}),Object(c.jsx)(x.b,{to:"/listen?m=".concat(l.info.songID||l.info.title,"&uid=").concat(l.info.userID),children:Object(c.jsx)("div",{className:"user-musics-content",style:{backgroundImage:'url("'.concat(l.src.imageURL,'")')}})}),Object(c.jsx)("div",{className:"-button",children:i?Object(c.jsx)("i",{className:"material-icons",onClick:function(t){r(!1),e.play(l)},value:l.info.title,id:"play_hover",children:"play_arrow"}):Object(c.jsx)("i",{onClick:function(t){r(!0),e.stop(t)},className:"material-icons",children:"pause"})}),Object(c.jsxs)("div",{id:"user-song-info",children:[Object(c.jsx)("div",{class:"user-song-title",children:Object(c.jsxs)("span",{children:[l.info.artist," - ",l.info.title]})}),Object(c.jsxs)("div",{class:"user-song-user",children:[Object(c.jsx)("div",{class:"mini-pfp",children:Object(c.jsx)("img",{src:e.pfp,width:"30",height:"30"})}),Object(c.jsx)(x.b,{to:"/u/"+l.info.userID+"/music",children:Object(c.jsx)("span",{children:l.info.uploader})})]}),Object(c.jsxs)("div",{className:"stats",children:[Object(c.jsxs)("div",{class:"views",children:[Object(c.jsx)("i",{class:"material-icons",children:"play_arrow"}),Object(c.jsx)("span",{children:l.stats.views})]}),Object(c.jsx)(M,{name:l.info.title,uID:l.info.userID,userName:d,music:l})]})]})]})},K=0;var G=function(e){var t=new m,n=Object(s.useState)([]),a=Object(u.a)(n,2),i=a[0],r=a[1],o=Object(s.useState)(K),l=Object(u.a)(o,2),d=l[0],j=l[1];function b(t){e.play(t)}function p(){e.stop()}return Object(s.useEffect)((function(){t.getPopular().then((function(e){return r(e)}))}),[]),Object(c.jsxs)("div",{id:"popular-container",className:"home-music-container ",children:[Object(c.jsxs)("div",{className:"musics-texts",children:[Object(c.jsx)("div",{className:"musics-title",children:Object(c.jsx)("h4",{children:"Popular musics"})}),Object(c.jsx)("div",{className:"musics-subtext",children:Object(c.jsx)("span",{children:"Most popular musics for you"})})]}),Object(c.jsx)("div",{className:"line"}),Object(c.jsx)("div",{className:"preview-box-container",style:{transform:"translate(".concat(d,"px, ",85,"px)")},children:i&&i.map((function(t,n){return Object(c.jsx)(s.Fragment,{children:Object(c.jsx)(z,{name:t,play:b,userName:e.userName,stop:p,audio:e.audio})},n)}))}),Object(c.jsxs)("div",{className:"content-slider",children:[Object(c.jsx)("div",{id:"next",className:"slider",onClick:function(){j(K-=225)},children:Object(c.jsx)("span",{className:"material-icons",children:"keyboard_arrow_right"})}),Object(c.jsx)("div",{id:"previous",className:"slider",onClick:function(){j(K+=225)},children:Object(c.jsx)("span",{className:"material-icons",children:"keyboard_arrow_left"})})]})]})},J=0;var W=function(e){var t=Object(s.useContext)(k),n=new m,a=Object(s.useState)(),i=Object(u.a)(a,2),r=i[0],o=i[1],l=Object(s.useState)(J),d=Object(u.a)(l,2),j=d[0],b=d[1];function p(t){e.play(t)}function h(){e.stop()}return Object(s.useEffect)((function(){n.getRecommend(t).then((function(e){return o(e)}))}),[t]),document.onscroll=function(){document.documentElement.scrollTop+window.innerHeight==document.documentElement.scrollHeight&&console.log("scrolled")},Object(c.jsxs)("div",{id:"recomend-container",className:"home-music-container ",children:[Object(c.jsxs)("div",{className:"musics-texts",children:[Object(c.jsx)("div",{className:"musics-title",children:Object(c.jsx)("h4",{children:"Recommended musics"})}),Object(c.jsx)("div",{className:"musics-subtext",children:Object(c.jsx)("span",{children:"Most recomended musics for you"})})]}),Object(c.jsx)("div",{className:"line"}),Object(c.jsx)("div",{className:"preview-box-container",id:"recomend-box-container",style:{transform:"translate(".concat(j,"px, ",85,"px)")},children:r&&r.map((function(t,n){return Object(c.jsx)(s.Fragment,{children:Object(c.jsx)(z,{name:t,play:p,userName:e.userName,stop:h,audio:e.audio})},n)}))}),Object(c.jsxs)("div",{className:"content-slider",children:[Object(c.jsx)("div",{id:"next",className:"slider",onClick:function(){b(J-=225)},children:Object(c.jsx)("span",{class:"material-icons",children:"keyboard_arrow_right"})}),Object(c.jsx)("div",{id:"previous",className:"slider",onClick:function(){J+=225,console.log(J),b(J)},children:Object(c.jsx)("span",{class:"material-icons",children:"keyboard_arrow_left"})})]})]})},Q=0;var V=function(e){var t=Object(s.useState)(),n=Object(u.a)(t,2),a=n[0],i=n[1],r=Object(s.useState)(Q),o=Object(u.a)(r,2),l=o[0],d=o[1],j=new m;function b(t){e.play(t)}function p(){e.stop()}return Object(s.useEffect)((function(){j.getTrending().then((function(e){return i(e)}))}),[]),Object(c.jsxs)("div",{id:"trending-container",className:"home-music-container ",children:[Object(c.jsxs)("div",{className:"musics-texts",children:[Object(c.jsx)("div",{className:"musics-title",children:Object(c.jsx)("h4",{children:"Trending musics"})}),Object(c.jsx)("div",{className:"musics-subtext",children:Object(c.jsx)("span",{children:"Most trending musics for you"})})]}),Object(c.jsx)("div",{className:"line"}),Object(c.jsx)("div",{className:"preview-box-container",id:"trending-box-container",style:{transform:"translate(".concat(l,"px, ",85,"px)")},children:a&&a.map((function(t,n){return Object(c.jsx)(s.Fragment,{children:Object(c.jsx)(z,{name:t,play:b,userName:e.userName,stop:p,audio:e.audio})},n)}))}),Object(c.jsxs)("div",{className:"content-slider",children:[Object(c.jsx)("div",{id:"next",className:"slider",onClick:function(){d(Q-=225)},children:Object(c.jsx)("span",{className:"material-icons",children:"keyboard_arrow_right"})}),Object(c.jsx)("div",{id:"previous",className:"slider",onClick:function(){Q+=225,console.log(Q),d(Q)},children:Object(c.jsx)("span",{class:"material-icons",children:"keyboard_arrow_left"})})]})]})};var X=function(e){document.title="Moosix";var t=Object(s.useContext)(k),n=(d.a.database(),Object(s.useState)()),a=Object(u.a)(n,2),i=a[0],r=a[1],o=Object(s.useState)("0%"),l=Object(u.a)(o,2);function j(t){e.play(t)}function b(t){e.stop()}return l[0],l[1],d.a.auth(),Object(s.useEffect)((function(){t&&d.a.database().ref("users/"+t+"/private/login credentials").on("value",(function(e){console.log(e),r(e.val().userName)}))}),[t]),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{id:"home",className:"main",children:Object(c.jsx)("div",{className:"music-content-container",id:"home-musics",children:Object(c.jsxs)("div",{className:"music-box",id:"home-box",children:[Object(c.jsx)(G,{play:j,stop:b,userName:i,audio:e.audio}),Object(c.jsx)(V,{play:j,stop:b,userName:i,audio:e.audio}),Object(c.jsx)(W,{play:j,stop:b,userName:i,audio:e.audio})]})})})})},Y=n(31),q=(n(122),d.a.initializeApp({apiKey:"AIzaSyBHl1g2tLiLoDJIoKaWCsrdJG_T5xaoj_E",authDomain:"music-app-2a7e7.firebaseapp.com",databaseURL:"https://music-app-2a7e7.firebaseio.com",projectId:"music-app-2a7e7",storageBucket:"music-app-2a7e7.appspot.com",messagingSenderId:"4335188008",appId:"1:4335188008:web:b38bfddbe8feae83dfdd1d"}),n(63)),Z=n.n(q),$=function(){function e(){Object(h.a)(this,e)}return Object(O.a)(e,[{key:"login",value:function(){var e=Object(p.a)(b.a.mark((function e(t,n){var c=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.auth().signInWithEmailAndPassword(t,n).then((function(e){return e.user.getIdToken().then((function(e){c.postData("/api/login",{idToken:e})}))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"postData",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t,n,c,s=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","CSRF-Token":Z.a.get("XSRF-TOKEN")},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 4:return c=e.sent,e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();var ee=function(e){var t,n,a=new $,i=Object(g.g)(),r=Object(s.useState)(),o=Object(u.a)(r,2),l=o[0];return o[1],Object(c.jsx)("div",{id:"login",className:"main-login",children:Object(c.jsx)("div",{className:"form-box",children:Object(c.jsxs)("div",{className:"form-container",children:[Object(c.jsxs)("div",{className:"inputHolder",children:[Object(c.jsx)("div",{className:"logo-form",children:Object(c.jsx)("h1",{children:"Logo"})}),Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("div",{className:"email-holder",children:Object(c.jsx)("input",{placeholder:"email adress",id:"email",className:"-input"})}),Object(c.jsx)("div",{className:"password-holder",children:Object(c.jsx)("input",{placeholder:"password",id:"password",type:"password",className:"-input"})}),Object(c.jsx)("div",{className:"btn-holder",children:Object(c.jsx)("button",{onClick:function(e){t=document.getElementById("email").value,n=document.getElementById("password").value,a.login(t,n).then((function(){i.push("/")}))},children:Object(c.jsx)("span",{children:Object(c.jsx)("b",{children:"Login"})})})})]})]}),Object(c.jsxs)("div",{class:"link-signup",children:[Object(c.jsx)("p",{children:l}),Object(c.jsxs)("p",{children:["Havent created account? plz ",Object(c.jsx)(x.b,{to:"./signup",children:" click here"})]})]})]})})})};var te,ne,ce,se=function(){var e=Object(g.g)();return Object(c.jsx)("div",{id:"signUp",className:"main-login",children:Object(c.jsx)("div",{className:"form-box",children:Object(c.jsxs)("div",{className:"form-container",children:[Object(c.jsx)("div",{class:"logo-form",children:Object(c.jsx)("h1",{children:"Logo"})}),Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("div",{className:"email-holder",children:Object(c.jsx)("input",{id:"email",placeholder:"email",className:"-input"})}),Object(c.jsx)("div",{className:"password-holder",children:Object(c.jsx)("input",{id:"password",placeholder:"password",className:"-input",type:"password"})}),Object(c.jsx)("div",{className:"username-holder",children:Object(c.jsx)("input",{id:"userName",placeholder:"username",className:"-input"})}),Object(c.jsx)("div",{class:"btn-holder",children:Object(c.jsx)("button",{onClick:function(){var t=document.getElementById("email").value,n=document.getElementById("password").value,c=document.getElementById("userName").value;function s(){return(s=Object(p.a)(b.a.mark((function t(n,s){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y.a.auth().createUserWithEmailAndPassword(n,s).then((function(){console.log("successfull");var e=Y.a.auth().currentUser.uid;console.log(e),Y.a.database().ref("users/"+e+"/private/login credentials").set({userName:c,userId:e,userLog:!0}).then(Y.a.database().ref("users/"+e+"/public/profile").set({info:{bio:"",firstName:c,lastName:c,name:c},pfp:{url:"",x:50,y:50,zoom:1}}))}));case 2:e.push("./login");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(e,t){s.apply(this,arguments)}(t,n)},children:"Next"})})]}),Object(c.jsx)("div",{class:"link-signup",children:Object(c.jsxs)("p",{children:["Already have an account? plz ",Object(c.jsx)(x.b,{to:"./login",children:" click here"})]})})]})})})},ae=(new Date,new m);function ie(){var e=Object(s.useState)(),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(c.jsx)("div",{className:"edit-upload",children:Object(c.jsx)("div",{className:"edit-upload-box",children:Object(c.jsxs)("div",{className:"edit-upload-main",children:[Object(c.jsxs)("div",{className:"pic-wrapper",children:[Object(c.jsx)("div",{className:"pic-holder",children:Object(c.jsx)("img",{src:n,width:"260",height:"260",alt:"aimge-preview",id:"prev"})}),Object(c.jsxs)("div",{className:"album-cover",children:[Object(c.jsx)("input",{type:"file",id:"album-btn",hidden:!0,onChange:function(e){console.log(e.target),te=document.getElementById("album-btn").files[0],a(URL.createObjectURL(e.target.files[0]))},accept:"image/jpeg, image/png"}),Object(c.jsx)("label",{for:"album-btn",children:Object(c.jsx)("span",{children:"Upload image"})})]})]}),Object(c.jsxs)("div",{className:"song-form",children:[Object(c.jsxs)("div",{className:"song-title",children:[Object(c.jsx)("span",{children:"Title"}),Object(c.jsx)("div",{className:"input-title",children:Object(c.jsx)("input",{id:"title",placeholder:"Name of your song...",className:"-input-form",defaultValue:ne.name,autoComplete:"off"})})]}),Object(c.jsxs)("div",{className:"artist",children:[Object(c.jsx)("span",{children:"Artist"}),Object(c.jsx)("div",{className:"input-artist",children:Object(c.jsx)("input",{id:"artist",placeholder:"Name of the artist...",className:"-input-form",autoComplete:"off"})})]}),Object(c.jsxs)("div",{className:"Genre",children:[Object(c.jsx)("span",{children:"Genre"}),Object(c.jsx)("div",{className:"input-gerne",children:Object(c.jsx)("input",{id:"genre",placeholder:"Name of your genre...",className:"-input-form",autoComplete:"off"})})]}),Object(c.jsxs)("div",{className:"Description",children:[Object(c.jsx)("span",{children:"Description"}),Object(c.jsx)("div",{className:"input-gerne",children:Object(c.jsx)("input",{id:"description",placeholder:"Describe your track..",className:"-input-form",autoComplete:"off"})})]}),Object(c.jsxs)("div",{className:"Tags",children:[Object(c.jsx)("span",{children:"Tags"}),Object(c.jsx)("div",{className:"input-tags",children:Object(c.jsx)("input",{id:"tags",placeholder:"add tags",className:"-input-form",autoComplete:"off"})})]}),Object(c.jsxs)("div",{className:"privateOpt",children:[Object(c.jsx)("span",{children:"Privacy?:"}),Object(c.jsxs)("div",{className:"input-privacy",children:[Object(c.jsxs)("div",{className:"public",children:[Object(c.jsx)("input",{type:"radio",id:"publicRad",name:"radio1",value:"public"}),Object(c.jsx)("label",{for:"publicRad",children:"Public"})]}),Object(c.jsxs)("div",{className:"private",children:[Object(c.jsx)("input",{type:"radio",id:"privateRad",name:"radio1",value:"private"}),Object(c.jsx)("label",{for:"privateRad",children:"Private"})]})]})]}),Object(c.jsxs)("div",{className:"save-cancel",children:[Object(c.jsx)("div",{className:"cancel",children:Object(c.jsx)("button",{onClick:function(){ce.push("/")},children:"Cancel"})}),Object(c.jsx)("div",{className:"save",children:Object(c.jsx)("button",{onClick:function(e){console.log(e),e.target.disabled=!0;var t=d.a.auth().currentUser.uid,n=document.getElementById("title").value,c=document.getElementById("artist").value,s=document.getElementById("genre").value,a=document.getElementById("description").value,i=document.getElementById("tags").value,r=document.getElementById("publicRad").checked;if(n.indexOf(".")>-1||n.indexOf("#")>-1||n.indexOf("/")>-1||n.indexOf("[")>-1||n.indexOf("]")>-1)console.log("cannot use special charecter");else if(!0===r){var o={userID:t,title:n,artist:c,genre:s,description:a,tags:i,image:te,file:ne};ae.upload(o)}},children:"Save"})})]})]})]})})})}var re=function(){var e,t;function n(){return ne=document.getElementById("actual-btn").files[0],ce.push("/upload/info"),Object(c.jsx)(g.a,{to:"/upload/info"})}return ce=Object(g.g)(),console.log(d.a.auth().currentUser),d.a.auth().onAuthStateChanged((function(e){e?(t=e.uid,d.a.database().ref("users/"+t+"/private/login credentials").on("value",(function(e){e.val().userName}))):ce.push("/login")})),Object(s.useEffect)((function(){}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(R,{}),Object(c.jsxs)(g.d,{children:[Object(c.jsx)(g.b,{exact:!0,path:"/upload",children:Object(c.jsx)("div",{className:"main",id:"upload-main",children:Object(c.jsx)("div",{className:"upload-container",id:"uc",children:Object(c.jsx)("div",{className:"upload-box",onDrop:n,children:Object(c.jsxs)("div",{className:"upload-main",children:[Object(c.jsx)("h2",{children:"Choose a song you want to upload"}),Object(c.jsxs)("div",{className:"upload-button",children:[Object(c.jsx)("input",{type:"file",id:"actual-btn",hidden:!0,onChange:n,accept:"audio/wav, audio/mp3"}),Object(c.jsx)("label",{for:"actual-btn",children:Object(c.jsx)("span",{children:"Upload file"})})]})]})})})})}),Object(c.jsx)(g.b,(e={exact:!0,path:"/upload/info"},Object(o.a)(e,"exact",!0),Object(o.a)(e,"component",ie),e))]})]})};var oe=function(e){var t=e.musics,n=e.uID,a=e.userName,i=e.pfp,r=e.user;function o(t){e.play(t)}function l(){console.log("yes stop"),e.stop()}return Object(c.jsx)("div",{class:"music-content-container",children:Object(c.jsx)("div",{class:"music-box",children:Object(c.jsx)("div",{class:"user-musics",children:t&&t.map((function(t,u){return Object(c.jsx)(s.Fragment,{children:Object(c.jsx)(z,{name:t,play:o,uID:n,userName:a,pfp:i,user:r,stop:l,audio:e.audio})},u)}))})})})},le=new m,ue=function(e){var t=Object(s.useState)(),n=Object(u.a)(t,2),a=n[0],i=n[1],r=Object(s.useState)(),o=Object(u.a)(r,2),l=o[0],j=o[1],b=Object(s.useState)(),p=Object(u.a)(b,2),h=p[0],O=p[1],m=Object(s.useState)(),f=Object(u.a)(m,2),v=f[0],N=f[1],y=Object(s.useState)([]),w=Object(u.a)(y,2),k=w[0],S=w[1],C=Object(s.useState)(null),I=Object(u.a)(C,2),E=I[0],D=I[1],L=Object(s.useState)(null),U=Object(u.a)(L,2),_=U[0],A=U[1],T=Object(s.useState)(),P=Object(u.a)(T,2),R=P[0],B=P[1],F=e.match.params.uID;return Object(s.useEffect)((function(){le.getUserSongs(F).then((function(e){return S(e)})),le.getUserData(F).then((function(e){return N(e)})),d.a.auth().onAuthStateChanged((function(e){le.getUserData(e.uid).then((function(e){return B(e.public.profile.info.name)}))}))}),[F]),Object(s.useEffect)((function(){v&&(D(v.public.profile.info.name),A(v.public.profile.pfp.url),i(v.public.profile.pfp.x),j(v.public.profile.pfp.y),O(v.public.profile.pfp.zoom))}),[v]),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{id:"profile",className:"main",children:[Object(c.jsxs)("div",{class:"profile-container",children:[Object(c.jsxs)("div",{className:"cover-pic",children:[Object(c.jsx)("img",{src:""}),Object(c.jsx)("div",{className:"User-Name",children:Object(c.jsx)("h1",{children:E})})]}),Object(c.jsx)("div",{className:"pfp",children:Object(c.jsx)("div",{className:"pfp-container",children:Object(c.jsx)("pfp",{className:"pfp-box",children:Object(c.jsx)("img",{src:_,style:{transform:"translate(".concat(a-50,"px, ").concat(l-50,"px) scale(").concat(parseInt(h)/100+1,")")}})})})}),Object(c.jsx)("div",{class:"tabsContainer",children:Object(c.jsxs)("div",{class:"tabs-holder",children:[Object(c.jsx)(x.b,{to:"/u/"+F+"/music",activeClassName:"Music-Nav-Active",children:Object(c.jsx)("button",{children:Object(c.jsx)("span",{children:"Music"})})}),Object(c.jsx)(x.b,{to:"/u/"+F+"/playlist",activeClassName:"PlayList-Nav-Active",children:Object(c.jsx)("button",{children:Object(c.jsx)("span",{children:"Playlist"})})}),Object(c.jsx)("button",{children:Object(c.jsx)("span",{children:"About"})})]})})]}),Object(c.jsx)(g.a,{to:"/u/"+F+"/music"}),Object(c.jsxs)(g.d,{children:[Object(c.jsx)(g.b,{exact:!0,path:"/u/"+F+"/music",children:Object(c.jsx)(oe,{musics:k,play:function(t){console.log(e),e.play(t)},uID:F,userName:R,pfp:_,user:E,stop:function(){e.stop()},audio:e.audio})}),Object(c.jsx)(g.b,{exact:!0,path:"/u/"+F+"/playlist"})]})]})})},de=new m;var je=function(e){var t=Object(s.useState)(),n=Object(u.a)(t,2),a=n[0],i=n[1],r=Object(s.useState)([]),o=Object(u.a)(r,2),l=o[0],j=o[1],b=new URLSearchParams(Object(g.h)().search).get("search");function p(t){e.play(t)}function h(){e.stop()}return console.log(b),Object(s.useEffect)((function(){d.a.auth().onAuthStateChanged((function(e){d.a.database().ref("users/"+e.uid+"/praivate/login credentials").on("value",(function(e){e.val()&&i(e.val().userName)}))}))}),[]),Object(s.useEffect)((function(){de.searchQ(b).then((function(e){return j(e)}))}),[b]),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{id:"home",className:"main",children:Object(c.jsx)("div",{className:"music-content-container",id:"home-musics",children:Object(c.jsx)("div",{className:"music-box",children:Object(c.jsxs)("div",{className:"user-musics",children:[l&&l.map((function(t,n){return Object(c.jsx)(s.Fragment,{children:Object(c.jsx)(z,{name:t,play:p,stop:h,uID:t.userID,userName:a,pfp:t.pfpURL,user:t.artist,audio:e.audio})},n)})),0==l.length?Object(c.jsx)("span",{children:"no results found"}):null]})})})})})};n(123),new m;var be=function(e){var t=Object(s.useState)(),n=Object(u.a)(t,2),a=n[0],i=n[1],r=Object(s.useState)(),o=Object(u.a)(r,2),l=o[0],d=o[1],j=Object(s.useState)(),b=Object(u.a)(j,2),p=b[0],h=b[1],O=Object(s.useState)(),m=Object(u.a)(O,2),f=m[0],x=m[1],v=Object(s.useState)(!1),g=Object(u.a)(v,2),N=g[0],y=g[1],w=Object(s.useState)(),k=Object(u.a)(w,2),C=k[0],I=k[1],E=Object(s.useContext)(S);return Object(s.useEffect)((function(){e.nowPlaying||(Array.isArray(e.tracks)?E.playlistIncludes(E.getCurrentSong())?i(E.getCurrentSong()):i(e.tracks[0]):i(e.tracks))}),[e]),Object(s.useEffect)((function(){a&&(d(a.info.title),h(a.src.imageURL),x(a.info.artist),I(a.info.description),E.audio.src==a.src.aduioURL&&0==E.audio.paused?y(!0):y(!1))}),[a]),Object(c.jsx)("div",{className:e.top||"top",children:Object(c.jsxs)("div",{className:"top-container",children:[Object(c.jsx)("div",{className:"bg-blur",style:{backgroundImage:'linear-gradient(to bottom, rgba(0, 0, 0, 0), var(--dark-secondary)), url("'.concat(p,'")')}}),Object(c.jsxs)("div",{className:"top-contents",children:[Object(c.jsx)("div",{className:"top-albumCover-wrapper",children:Object(c.jsx)("div",{className:"top-albumCover",style:{backgroundImage:'url("'.concat(p,'")')}})}),Object(c.jsxs)("div",{className:"top-info",children:[Object(c.jsx)("div",{className:"top-title",children:Object(c.jsx)("h2",{children:l})}),Object(c.jsx)("div",{className:"top-description",children:Object(c.jsx)("span",{children:C})}),Object(c.jsx)("div",{className:"top-artist-name",children:Object(c.jsx)("span",{children:f})})]}),Object(c.jsxs)("div",{className:"top-buttons",children:[Object(c.jsx)("div",{className:"top-play-botton",children:N?Object(c.jsx)("button",{onClick:function(){e.stop(),y(!1)},children:"pause"}):Object(c.jsx)("button",{onClick:function(){e.play(a),y(!0)},children:"play"})}),Object(c.jsx)("div",{className:"top-more-button"})]})]})]})})},pe=function(){function e(t){Object(h.a)(this,e),this.audio=new Audio,this.songArray=[],this.i=-1}return Object(O.a)(e,[{key:"play",value:function(){var e=this;this.audio.play(),this.i=this.songArray.indexOf(this.song),this.audio.addEventListener("ended",(function(t){if(e.i>-1&&e.i<e.songArray.length){var n=e.getNextSong();n&&e.playSong(n)}})),this.audio.addEventListener("play",(function(t){e.audio.currentTime})),this.audio.addEventListener("pause",(function(t){e.audio.currentTime})),this.audio.addEventListener("ended",(function(t){e.audio.currentTime})),this.audio.addEventListener("timeupdate",(function(t){e.audio.currentTime}))}},{key:"stop",value:function(){this.audio.pause()}},{key:"loadSongs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"song";"playlist"===t?this.songArray=e:"song"===t&&this.songArray.push(e)}},{key:"getNextSong",value:function(){return this.songArray&&this.i>-1&&this.i<this.songArray.length?this.songArray[this.i+1]:null}},{key:"getPreviousSong",value:function(){return this.songArray&&this.i>0&&this.i<this.songArray.length?this.songArray[this.i-1]:null}},{key:"playSong",value:function(e){this.song=e,this.audio.src=e.src.aduioURL,this.play(e)}},{key:"like",value:function(e){var t={likedBy:e,likedOf:this.song.info.uid,song_name:this.song.info.songID||this.song.info.title,song:this.song};this.postData("/api/music/like/send",t)}},{key:"updateViews",value:function(e){var t={initialTime:e.initialTime,finalTime:e.finalTime,songID:this.song.info.songID||this.song.info.title,uid:this.song.info.uid};this.postData("/api/music/views/update",t)}},{key:"createPlaylists",value:function(e){this.songArray=[],this.loadSongs(e.songs,"playlist")}},{key:"volumeHandler",value:function(e){this.audio.volume=e}},{key:"getCurrentSong",value:function(){return this.song}},{key:"getDuration",value:function(){return this.audio.duration?Math.floor(this.audio.duration/60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+":"+Math.floor(this.audio.duration%60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}):"00:00"}},{key:"getCurrentTime",value:function(){return this.audio.currentTime?Math.floor(this.audio.currentTime/60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+":"+Math.floor(this.audio.currentTime%60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}):"00:00"}},{key:"isPaused",value:function(){return this.audio.paused}},{key:"playlistIncludes",value:function(e){return this.songArray.includes(e)}},{key:"showPlaylists",value:function(){return this.songArray}},{key:"postData",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t,n,c,s=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 4:return c=e.sent,e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),he=function(){function e(t,n){Object(h.a)(this,e),this.songs=n||[],this.playlistName=t}return Object(O.a)(e,[{key:"createNewPlaylist",value:function(e,t){this.playlistName=e,this.songs=t}},{key:"addSong",value:function(e){this.songs.push(e)}},{key:"removeSong",value:function(e){var t=this.songs.filter((function(t){return t!==e}));this.songs=t}},{key:"getSongs",value:function(){return this.songs}}]),e}(),Oe=new m;var me=function(e){var t=Object(s.useContext)(S),n=Object(s.useState)(null),a=Object(u.a)(n,2),i=a[0],r=a[1],o=Object(s.useState)(null),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(s.useState)(null),p=Object(u.a)(b,2),h=(p[0],p[1],Object(s.useContext)(k));return Object(s.useEffect)((function(){if(h){var e=[];Oe.getUserLikes(h).then((function(e){return e})).then((function(t){t.forEach((function(t){Oe.getSongsById(t.id,t.song_id).then((function(t){return e.push(t)})).then((function(){return r(e)}))}))}))}}),[h]),Object(s.useEffect)((function(){if(i){var e=new he;e.createNewPlaylist("Likes",i),t.createPlaylists(e),console.log(t.showPlaylists()),j(t.showPlaylists())}}),[i]),Object(c.jsx)("div",{id:"userLikes",className:"main",children:Object(c.jsx)("div",{className:"music-content-container",id:"userLikes-music",children:Object(c.jsx)("div",{className:"music-box",id:"userLikes-box",children:Object(c.jsx)(be,{tracks:d,nowPlaying:null,play:e.play,audio:e.audio,stop:e.stop})})})})},fe=(n(124),new m);var xe=function(e){var t=new URLSearchParams(Object(g.h)().search),n=Object(s.useState)(null),a=Object(u.a)(n,2),i=a[0],r=a[1],o=t.get("m"),l=t.get("uid");return Object(s.useEffect)((function(){t&&fe.getSongsById(l,o).then((function(e){r(e)}))}),[o]),Object(c.jsx)("div",{id:"listen",className:"main",children:Object(c.jsx)("div",{className:"music-content-container",id:"listen-music",children:Object(c.jsx)("div",{className:"music-box",id:"listen-box",children:Object(c.jsx)(be,{tracks:i,nowPlaying:null,play:e.play,audio:e.audio,stop:e.stop,top:"top-listen"})})})})},ve=new Audio,ge=new pe;new he;var Ne=function(){var e,t,n=function(){var e=Object(s.useState)(0),t=Object(u.a)(e,2),n=(t[0],t[1]);return function(){return n((function(e){return e+1}))}}(),a=Object(s.useState)("0%"),i=Object(u.a)(a,2),r=i[0],j=(i[1],Object(s.useState)()),b=Object(u.a)(j,2),p=b[0],h=(b[1],Object(s.useState)(null)),O=Object(u.a)(h,2),m=O[0],v=O[1],N=Object(s.useState)(),y=Object(u.a)(N,2);y[0],y[1],d.a.auth().onAuthStateChanged((function(e){return v(e.uid)}));var w=d.a.database();function C(e){ge.audio.src===e.src.aduioURL?(ge.play(),t=e.title):(ge.playSong(e),t=e.info.songID||e.info.title),ve&&ve.addEventListener("timeupdate",(function(){if(t){var n,c,s=ve.currentTime;if(s>30&&s<30.2)console.log(3e3),w.ref("users/"+e.info.userID+"/public/songs/"+t+"/stats").once("value").then((function(e){n=e.val().views,c=n+1})).then((function(){w.ref("users/"+e.info.userID+"/public/songs/"+t+"/stats").update({views:c}).then((function(){w.ref("public/songs/"+t).update({views:c})}))}))}}))}function I(e){n(),ge.stop()}return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(x.a,{children:Object(c.jsxs)(g.d,{children:[Object(c.jsx)(g.b,{path:"/login",exact:!0,component:ee}),Object(c.jsx)(g.b,{path:"/Signup",exact:!0,component:se}),Object(c.jsx)("div",{className:"blue",id:"main-render",children:Object(c.jsx)(k.Provider,{value:m,children:Object(c.jsxs)(S.Provider,{value:ge,children:[Object(c.jsx)(g.b,{exact:!0,path:"/about",render:function(e){return Object(c.jsx)(B,Object(l.a)({},e))}}),Object(c.jsx)(g.b,{path:"/upload",component:re}),Object(c.jsx)(g.b,{exact:!0,path:"/account/edit",component:f}),Object(c.jsx)(g.b,{path:"/u/:uID",render:function(e){return Object(c.jsx)(ue,Object(l.a)(Object(l.a)({},e),{},{play:C,stop:I,audio:ve}))}}),Object(c.jsx)(g.b,(e={exact:!0,path:"/"},Object(o.a)(e,"exact",!0),Object(o.a)(e,"render",(function(e){return Object(c.jsx)(X,Object(l.a)(Object(l.a)({},e),{},{play:C,stop:I,audio:ve}))})),e)),Object(c.jsx)(g.b,{path:"/results",exact:!0,render:function(e){return Object(c.jsx)(je,Object(l.a)(Object(l.a)({},e),{},{play:C,stop:I,audio:ve}))}}),Object(c.jsx)(g.b,{path:"/listen",exact:!0,render:function(e){return Object(c.jsx)(xe,Object(l.a)(Object(l.a)({},e),{},{play:C,stop:I,audio:ve}))}}),Object(c.jsx)(g.b,{path:"/liked",exact:!0,render:function(e){return Object(c.jsx)(me,Object(l.a)(Object(l.a)({},e),{},{play:C,stop:I,audio:ve}))}}),Object(c.jsx)(R,{}),Object(c.jsx)(U,{}),Object(c.jsx)(A,{progVal:r,stop:I,playAudio:function(){n(),ge.play()},audio:ve,volumeHandler:function(e){ve.volume=e},AudioInfo:p,next:function(){n();var e=ge.getNextSong();e&&ge.playSong(e)},previous:function(){n();var e=ge.getPreviousSong();e&&ge.playSong(e)}})]})})})]})})})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,126)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),a(e),i(e)}))};r.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(Ne,{})}),document.getElementById("root")),ye()},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},82:function(e,t,n){},84:function(e,t,n){}},[[125,1,2]]]);
//# sourceMappingURL=main.daad1985.chunk.js.map